{"version":3,"sources":["Reducer.tsx","Instruments.tsx","SideNav.tsx","Visualizers.tsx","MainPage.tsx","instruments/Piano.tsx","visualizers/Waveform.tsx","visualizers/developer-soni.tsx","visualizers/adam-bel.tsx","img/flute.png","instruments/developer-soni.tsx","img/violin.jpg","instruments/adam-bel.tsx","State.tsx","Socket.tsx","App.tsx","index.tsx"],"names":["DispatchAction","type","args","this","fromJS","appReducer","state","action","console","debug","newState","oldSocket","get","close","set","delete","songs","song","find","s","log","notes","pathname","getIn","search","instrumentName","substring","visualizerName","URLSearchParams","instruments","visualizers","instrument","i","name","visualizer","v","error","toJS","update","Instrument","component","TopNav","className","InstrumentContainer","dispatch","InstrumentComponent","useState","Tone","oscillator","toDestination","synth","setSynth","useEffect","eachNote","split","noteObjs","map","note","idx","time","velocity","value","triggerAttackRelease","length","start","cancel","style","top","Section","title","children","RadioButton","to","text","active","onClick","classNames","fw7","Instruments","activeInstrument","location","useLocation","Visualizers","activeVisualizer","Songs","List","setSongs","songsList","size","SongFilter","onChangeHandler","event","inputValue","target","filteredSongs","filter","toUpperCase","startsWith","id","props","maxLength","onChange","SongDetails","toJSON","songTitle","artist","album","genre","SideNav","Visualizer","draw","VisualizerContainer","analyzer","useMemo","onResize","useCallback","p5","width","window","innerWidth","height","innerHeight","resizeCanvas","volume","connect","disconnect","setup","canvasParentRef","createCanvas","WEBGL","parent","windowResized","InstrumentPanel","VisualizerPanel","InstrumentAndVisualizer","left","ShowWelcome","MainPage","isWelcome","PianoKey","minor","index","onMouseDown","triggerAttack","onMouseUp","triggerRelease","zIndex","marginLeft","PianoType","PianoInstrument","keys","oscillators","Range","octave","key","isMinor","indexOf","o","newType","oldSynth","WaveformVisualizer","dim","Math","min","background","strokeWeight","stroke","noFill","values","getValue","beginShape","amplitude","x","y","vertex","endShape","RGBCirclesVisualizer","strokeColors","color","floor","random","String","angle","PI","j","myX","cos","myY","sin","circle","DubVisualizer","colors","translate","rotateX","frameCount","rotateY","fill","box","FluteKey","FluteInstrument","src","image","alt","ViolinKey","topDi","leftDi","rota","transform","borderRadius","ViolinInstrument","position","defaultState","Map","SOCKET_OPTS","transports","path","autoConnect","reconnection","timeout","idCounter","send","socket","msg","a","_id","Promise","resolve","reject","once","resp","success","emit","App","useReducer","onConnect","onDisconnect","newSocket","on","initializeSocket","rootEl","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5486bea7.chunk.js","sourcesContent":["// 3rd party\nimport {List, Map, fromJS} from 'immutable';\n\n// project deps\nimport {Instrument} from './Instruments';\nimport {Visualizer} from './Visualizers';\nimport {AppState} from './State';\n\n/** ------------------------------------------------------------------------ **\n * All user input is handled by DispatchAction.\n ** ------------------------------------------------------------------------ */\n\n/**\n * Observation: pure map (compare and contrast with impure map)\n *\n * 'instrument': Instrument\n * 'visualizer': Visualizer\n * 'songs': List<string>\n * 'notes': List<{id: number, songTitle: string, notes: string}>\n */\ntype DispatchArgs = {\n    [key: string]: any;\n};\n\n// A simple algebraic data-type with string literal types\ntype DispatchActionType =\n    | 'SET_SOCKET'\n    | 'DELETE_SOCKET'\n    | 'SET_SONGS'\n    | 'PLAY_SONG'\n    | 'STOP_SONG'\n    | 'SET_LOCATION';\n\nexport class DispatchAction {\n    readonly type: DispatchActionType;\n    readonly args: Map<string, any>;\n\n    constructor(type: DispatchActionType, args?: DispatchArgs) {\n        this.type = type;\n        this.args = fromJS(args) as Map<string, any>;\n    }\n}\n\n/** ------------------------------------------------------------------------ **\n * Top-level application reducer.\n ** ------------------------------------------------------------------------ */\n\nexport function appReducer(state: AppState, action: DispatchAction): AppState {\n    const {type, args} = action;\n\n    console.debug(`${type}`);\n\n    // Question: Does this function remind of you registering callbacks?\n    const newState = (() => {\n        switch (type) {\n            case 'SET_SOCKET': {\n                const oldSocket = state.get('socket');\n                if (oldSocket) {\n                    oldSocket.close();\n                }\n\n                return state.set('socket', args.get('socket'));\n            }\n            case 'DELETE_SOCKET': {\n                return state.delete('socket');\n            }\n            case 'SET_SONGS': {\n                const songs = args.get('songs');\n                return state.set('songs', songs);\n            }\n            case 'PLAY_SONG': {\n                const song = state\n                    .get('songs')\n                    .find((s: any) => s.get('id') === args.get('id'))\n                console.log(song);\n                const notes = song\n                    .get('notes');\n                return state.set('notes', notes).set('playingSong', song);\n            }\n            case 'STOP_SONG': {\n                return state.delete('notes');\n            }\n            case 'SET_LOCATION': {\n                const pathname = args.getIn(['location', 'pathname'], '') as string;\n                const search = args.getIn(['location', 'search'], '') as string;\n\n                const instrumentName: string = pathname.substring(1);\n                const visualizerName: string =\n                    new URLSearchParams(search.substring(1)).get('visualizer') ?? '';\n                const instruments: List<Instrument> = state.get('instruments');\n                const visualizers: List<Visualizer> = state.get('visualizers');\n\n                const instrument = instruments.find(i => i.name === instrumentName);\n                const visualizer = visualizers.find(v => v.name === visualizerName);\n\n                return state\n                    .set('instrument', instrument)\n                    .set('visualizer', visualizer);\n            }\n            default:\n                console.error(`type unknown: ${type}\\n`, args.toJS());\n                return state;\n        }\n    })();\n\n    console.debug(newState.update('socket', s => (s ? '[socket]' : s)).toJS());\n\n    return newState;\n}\n","// 3rd party library imports\nimport React, { useState, useEffect } from 'react';\nimport * as Tone from 'tone';\n\n// project imports\nimport { DispatchAction } from './Reducer';\nimport { AppState } from './State';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of an Instruments.\n ** ------------------------------------------------------------------------ */\n\nexport interface InstrumentProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  name: string;\n  synth: Tone.Synth;\n  setSynth: (f: (oldSynth: Tone.Synth) => Tone.Synth) => void;\n}\n\nexport class Instrument {\n  public readonly name: string;\n  public readonly component: React.FC<InstrumentProps>;\n\n  constructor(name: string, component: React.FC<InstrumentProps>) {\n    this.name = name;\n    this.component = component;\n  }\n}\n\nfunction TopNav({ name }: { name: string }) {\n  return (\n    <div\n      className={\n        'w-100 h3 bb b--light-gray flex justify-between items-center ph4'\n      }\n    >\n      <div>{name}</div>\n    </div>\n  );\n}\n\ninterface InstrumentContainerProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  instrument: Instrument;\n}\n\nexport const InstrumentContainer: React.FC<InstrumentContainerProps> = ({\n  instrument,\n  state,\n  dispatch,\n}: InstrumentContainerProps) => {\n  const InstrumentComponent = instrument.component;\n  const [synth, setSynth] = useState(\n    new Tone.Synth({\n      oscillator: { type: 'sine' } as Tone.OmniOscillatorOptions,\n    }).toDestination(),\n  );\n\n  const notes = state.get('notes');\n\n  useEffect(() => {\n    if (notes && synth) {\n      let eachNote = notes.split(' ');\n      let noteObjs = eachNote.map((note: string, idx: number) => ({\n        idx,\n        time: `+${idx / 4}`,\n        note,\n        velocity: 1,\n      }));\n\n      new Tone.Part((time, value) => {\n        // the value is an object which contains both the note and the velocity\n        synth.triggerAttackRelease(value.note, '4n', time, value.velocity);\n        if (value.idx === eachNote.length - 1) {\n          dispatch(new DispatchAction('STOP_SONG'));\n        }\n      }, noteObjs).start(0);\n\n      Tone.Transport.start();\n\n      return () => {\n        Tone.Transport.cancel();\n      };\n    }\n\n    return () => {};\n  }, [notes, synth, dispatch]);\n\n  return (\n    <div>\n      <TopNav name={instrument.name} />\n      <div\n        className={'bg-white absolute right-0 left-0'}\n        style={{ top: '4rem' }}\n      >\n        <InstrumentComponent\n          name={instrument.name}\n          state={state}\n          dispatch={dispatch}\n          synth={synth}\n          setSynth={setSynth}\n        />\n      </div>\n    </div>\n  );\n};\n","// 3rd party library imports\nimport classNames from 'classnames';\nimport {fromJS, List} from 'immutable';\nimport React, {Fragment, useEffect, useState} from 'react';\nimport {Link, useLocation} from 'react-router-dom';\nimport {Music20, RadioButton20, RadioButtonChecked20,} from '@carbon/icons-react';\n\n// project imports\nimport {DispatchAction} from './Reducer';\nimport {AppState} from './State';\nimport {Instrument} from './Instruments';\nimport {Visualizer} from './Visualizers';\n\n/** ------------------------------------------------------------------------ **\n * All the components in the side navigation.\n ** ------------------------------------------------------------------------ */\n\ninterface SideNavProps {\n    state: AppState;\n    dispatch: React.Dispatch<DispatchAction>;\n}\n\nconst Section: React.FC<{ title: string }> = ({title, children}) => {\n    return (\n        <div className=\"flex flex-column bb b--light-gray pa3 customHeight\">\n            <div className=\"fw7 mb2\">{title} </div>\n            <div className=\"flex-auto overflow-scroll\">{children}</div>\n        </div>\n    );\n};\n\ninterface RadioButtonProps {\n    to: any,\n    text: string,\n    active: boolean,\n    onClick: () => void\n}\n\nfunction RadioButton({to, text, active, onClick}: RadioButtonProps): JSX.Element {\n    return (\n        <Link to={to} className=\"no-underline\">\n            <div\n                className={classNames('f6 flex items-center black', {fw7: active})}\n                onClick={onClick}\n            >\n                {active ? (\n                    <RadioButtonChecked20 className=\"mr1\"/>\n                ) : (\n                    <RadioButton20 className=\"mr1\"/>\n                )}\n                <div className=\"dim\">{text}</div>\n            </div>\n        </Link>\n    );\n}\n\nfunction Instruments({state}: SideNavProps): JSX.Element {\n    const instruments: List<Instrument> = state.get('instruments');\n    const activeInstrument = state.get('instrument')?.name;\n    const location = useLocation();\n\n    return (\n        <Section title=\"Instruments\">\n            {instruments.map(i => (\n                <RadioButton\n                    key={i.name}\n                    to={`/${i.name}${location.search}`}\n                    text={i.name}\n                    active={i.name === activeInstrument}\n                    onClick={() => console.log(i.name)}\n                />\n            ))}\n        </Section>\n    );\n}\n\nfunction Visualizers({state}: SideNavProps): JSX.Element {\n    const visualizers: List<Visualizer> = state.get('visualizers');\n    const activeVisualizer = state.get('visualizer')?.name;\n    const location = useLocation();\n\n    return (\n        <Section title=\"Visualizers\">\n            {visualizers.map(v => (\n                <RadioButton\n                    key={v.name}\n                    to={{\n                        pathname: location.pathname,\n                        search: `?visualizer=${v.name}`,\n                    }}\n                    text={v.name}\n                    active={v.name === activeVisualizer}\n                    onClick={() => console.log(v.name)}\n                />\n            ))}\n        </Section>\n    );\n}\n\nfunction Songs({state, dispatch}: SideNavProps): JSX.Element {\n    const [songs, setSongs] = useState(List<any>()); // Songs are stored in the component state\n\n    useEffect(() => {\n        const songsList: List<any> = state.get('songs', List());\n        if (songsList.size > 0) {\n            setSongs(songsList); // Adds the songs from the application state\n        }\n    }, [state]);\n\n    // This method is used within the filter component\n    const handleInputChange = (event: Event) => {\n        const inputElement = event.target as HTMLInputElement\n        const inputValue = inputElement.value ?? \"\";\n        const filteredSongs = inputValue ? songs.filter((song) => {\n            return song.get('songTitle').toUpperCase().startsWith(inputValue.toUpperCase());\n        }) : state.get('songs', List());\n        if (filteredSongs) {\n            setSongs(filteredSongs); // Filtered songs are set to this components state\n        }\n    }\n\n    return (\n        <Fragment>\n            <SongFilter onChangeHandler={handleInputChange}/>\n            <Section title=\"Playlist\">\n                {songs.map(song => (\n                    <div\n                        key={song.get('id')}\n                        className=\"f6 pointer underline flex items-center no-underline i dim\"\n                        onClick={() =>\n                            dispatch(new DispatchAction('PLAY_SONG', {id: song.get('id')}))\n                        }\n                    >\n                        <Music20 className=\"mr1\"/>\n                        {song.get('songTitle')}\n                    </div>\n                ))}\n            </Section>\n        </Fragment>\n    );\n}\n\n/*\n* This component displays song filter\n* */\nfunction SongFilter(props: any): JSX.Element {\n    const onChangeHandler = props.onChangeHandler;\n    return (\n        <div className=\"pa2 b--light-gray mb1 mr3\">\n            <h4 className=\"fw7 mb2\">Search songs</h4>\n            <input type=\"text\" maxLength={50} onChange={onChangeHandler}/>\n        </div>\n    )\n}\n\n/*\n* This component displays details of the currently playing song\n* */\nfunction SongDetails({state}: SideNavProps): JSX.Element {\n    let song = state.get('playingSong', fromJS({})).toJSON();\n    return (\n        <Fragment>\n            {song.songTitle && <div className=\"songDetails overflow-scroll\">\n                <h3 className=\"fw7 mb2\">{song.songTitle}</h3>\n                <div className=\"songDetails__element\">\n                    <span><b>Artist :</b></span>\n                    <span className=\"songDetails__element-detail\">{song.artist ?? 'Not Available'}</span>\n                </div>\n                <div className=\"songDetails__element\">\n                    <span><b>Album : </b></span>\n                    <span className=\"songDetails__element-detail\">{song.album ?? 'Not Available'}</span>\n                </div>\n                <div className=\"songDetails__element\">\n                    <span><b>Genre : </b></span>\n                    <span className=\"songDetails__element-detail\">{song.genre ?? 'Not Available'}</span>\n                </div>\n            </div>}\n        </Fragment>\n\n    );\n}\n\nexport function SideNav({state, dispatch}: SideNavProps): JSX.Element {\n\n    return (\n        <div className=\"absolute top-0 left-0 bottom-0 w5 z-1 shadow-1 bg-white flex flex-column\">\n            <div className=\"h3 fw7 f5 flex items-center pl3 bb b--light-gray\">\n                Temp Instrument\n            </div>\n            <div className=\"flex-auto\">\n                <Instruments state={state} dispatch={dispatch}/>\n                <Visualizers state={state} dispatch={dispatch}/>\n                <Songs state={state} dispatch={dispatch}/>\n                <SongDetails state={state} dispatch={dispatch}/> {/* This renders the song details component */}\n            </div>\n        </div>\n    );\n}\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport Sketch from 'react-p5';\nimport P5 from 'p5';\nimport React, { useEffect, useMemo, useCallback } from 'react';\n\ntype VisualizerDrawer = (p5: P5, analyzer: Tone.Analyser) => void;\n\ninterface VisualizerContainerProps {\n  visualizer: Visualizer;\n}\n\nexport class Visualizer {\n  public readonly name: string;\n  public readonly draw: VisualizerDrawer;\n\n  constructor(name: string, draw: VisualizerDrawer) {\n    this.name = name;\n    this.draw = draw;\n  }\n}\n\nexport function VisualizerContainer({ visualizer }: VisualizerContainerProps) {\n  const { name, draw } = visualizer;\n\n  const analyzer: Tone.Analyser = useMemo(\n    () => new Tone.Analyser('waveform', 256),\n    [],\n  );\n\n  const onResize = useCallback((p5: P5) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n\n    p5.resizeCanvas(width, height, false);\n  }, []);\n\n  useEffect(() => {\n    Tone.getDestination().volume.value = -5;\n    Tone.getDestination().connect(analyzer);\n    return () => {\n      Tone.getDestination().disconnect(analyzer);\n    };\n  }, [analyzer]);\n\n  const setup = (p5: P5, canvasParentRef: Element) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    p5.createCanvas(width, height, p5.WEBGL).parent(canvasParentRef);\n  };\n\n  return (\n    <div className={'bg-black absolute bottom-0 right-0 left-0 h-50'}>\n      <div className={'z-1 absolute left-0 top-0 pa4 white f5'}>{name}</div>\n      <Sketch\n        setup={setup}\n        draw={p5 => draw(p5, analyzer)}\n        windowResized={onResize}\n      />\n    </div>\n  );\n}\n","// 3rd party library imports\nimport React, { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport * as Tone from 'tone';\nimport { Music32 } from '@carbon/icons-react';\n\n// project imports\nimport { InstrumentContainer } from './Instruments';\nimport { AppState } from './State';\nimport { DispatchAction } from './Reducer';\nimport { SideNav } from './SideNav';\nimport { VisualizerContainer } from './Visualizers';\n\ntype PanelProps = {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n};\n\n/** ------------------------------------------------------------------------ **\n * Instrument and visualizer component\n ** ------------------------------------------------------------------------ */\n\nfunction InstrumentPanel({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the instrument.\n   */\n  const instrument = state.get('instrument');\n\n  return (\n    <div>\n      {instrument && (\n        <InstrumentContainer\n          state={state}\n          dispatch={dispatch}\n          instrument={instrument}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction VisualizerPanel({ state }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the visualizer.\n   */\n  const visualizer = state.get('visualizer');\n\n  return (\n    <div>\n      {visualizer && (\n        <VisualizerContainer key={visualizer.name} visualizer={visualizer} />\n      )}\n    </div>\n  );\n}\n\nfunction InstrumentAndVisualizer({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles the instrument panel and visualizer panel together.\n   */\n\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column\"\n      style={{ left: '16rem' }}\n    >\n      <InstrumentPanel state={state} dispatch={dispatch} />\n      <VisualizerPanel state={state} dispatch={dispatch} />\n    </div>\n  );\n}\n\nfunction ShowWelcome(): JSX.Element {\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center\"\n      style={{ left: '16rem' }}\n    >\n      <div className=\"mw6 lh-copy mb4\">\n        <Music32 />\n        <div className=\"f3 fw7 mb2\">Welcome to the case study.</div>\n        <div className=\"f4 mb3\">\n          Select an instrument and a visualizer on the left to serve some fresh\n          beats.\n        </div>\n        <div className=\"f5\">The UI is yours to design. Express yourself.</div>\n      </div>\n    </div>\n  );\n}\n\n/** ------------------------------------------------------------------------ **\n * Main page component\n ** ------------------------------------------------------------------------ */\n\nexport function MainPage({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles together the entire main page.\n   */\n\n  const location = useLocation();\n  const isWelcome = !state.get('instrument');\n  console.log('INSTRUMENT', isWelcome);\n\n  useEffect(() => {\n    dispatch(new DispatchAction('SET_LOCATION', { location }));\n  }, [dispatch, location]);\n\n  return (\n    <div\n      className=\"fixed top-0 left-0 h-100 w-100 bg-white\"\n      onClick={() => Tone.start()}\n    >\n      <SideNav state={state} dispatch={dispatch} />\n      {isWelcome ? (\n        <ShowWelcome />\n      ) : (\n        <InstrumentAndVisualizer state={state} dispatch={dispatch} />\n      )}\n    </div>\n  );\n}\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport { List, Range } from 'immutable';\nimport React from 'react';\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */\n\ninterface PianoKeyProps {\n  note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\n  duration?: string;\n  synth?: Tone.Synth; // Contains library code for making sound\n  minor?: boolean; // True if minor key, false if major key\n  octave: number;\n  index: number; // octave + index together give a location for the piano key\n}\n\nexport function PianoKey({\n  note,\n  synth,\n  minor,\n  index,\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */\n  return (\n    // Observations:\n    // 1. The JSX refers to the HTML-looking syntax within TypeScript.\n    // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n    // 3. The curly braces `{` and `}` should remind you of string interpolation.\n    <div\n      onMouseDown={() => synth?.triggerAttack(`${note}`)} // Question: what is `onMouseDown`?\n      onMouseUp={() => synth?.triggerRelease('+0.25')} // Question: what is `onMouseUp`?\n      className={classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor, // minor keys are black\n        'black bg-white h4': !minor, // major keys are white\n      })}\n      style={{\n        // CSS\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      }}\n    ></div>\n  );\n}\n\n// eslint-disable-next-line\nfunction PianoKeyWithoutJSX({\n  note,\n  synth,\n  minor,\n  index,\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component for pedagogical purposes.\n   * See `PianoKey` for the React component with JSX (JavaScript XML).\n   */\n  return React.createElement(\n    'div',\n    {\n      onMouseDown: () => synth?.triggerAttack(`${note}`),\n      onMouseUp: () => synth?.triggerRelease('+0.25'),\n      className: classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor,\n        'black bg-white h4': !minor,\n      }),\n      style: {\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      },\n    },\n    [],\n  );\n}\n\nfunction PianoType({ title, onClick, active }: any): JSX.Element {\n  return (\n    <div\n      onClick={onClick}\n      className={classNames('dim pointer ph2 pv1 ba mr2 br1 fw7 bw1', {\n        'b--black black': active,\n        'gray b--light-gray': !active,\n      })}\n    >\n      {title}\n    </div>\n  );\n}\n\nfunction Piano({ synth, setSynth }: InstrumentProps): JSX.Element {\n  const keys = List([\n    { note: 'C', idx: 0 },\n    { note: 'Db', idx: 0.5 },\n    { note: 'D', idx: 1 },\n    { note: 'Eb', idx: 1.5 },\n    { note: 'E', idx: 2 },\n    { note: 'F', idx: 3 },\n    { note: 'Gb', idx: 3.5 },\n    { note: 'G', idx: 4 },\n    { note: 'Ab', idx: 4.5 },\n    { note: 'A', idx: 5 },\n    { note: 'Bb', idx: 5.5 },\n    { note: 'B', idx: 6 },\n  ]);\n\n  const setOscillator = (newType: Tone.ToneOscillatorType) => {\n    setSynth(oldSynth => {\n      oldSynth.disconnect();\n\n      return new Tone.Synth({\n        oscillator: { type: newType } as Tone.OmniOscillatorOptions,\n      }).toDestination();\n    });\n  };\n\n  const oscillators: List<OscillatorType> = List([\n    'sine',\n    'sawtooth',\n    'square',\n    'triangle',\n    'fmsine',\n    'fmsawtooth',\n    'fmtriangle',\n    'amsine',\n    'amsawtooth',\n    'amtriangle',\n  ]) as List<OscillatorType>;\n\n  return (\n    <div className=\"pv4\">\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(2, 7).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave}`;\n            return (\n              <PianoKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave}\n                index={(octave - 2) * 7 + key.idx}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className={'pl4 pt4 flex'}>\n        {oscillators.map(o => (\n          <PianoType\n            key={o}\n            title={o}\n            onClick={() => setOscillator(o)}\n            active={synth?.oscillator.type === o}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport const PianoInstrument = new Instrument('Piano', Piano);\n","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport { Visualizer } from '../Visualizers';\n\n\nexport const WaveformVisualizer = new Visualizer(\n  'Waveform',\n  (p5: P5, analyzer: Tone.Analyser) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    const dim = Math.min(width, height);\n\n    p5.background(0, 0, 0, 255);\n\n    p5.strokeWeight(dim * 0.01);\n    p5.stroke(255, 255, 255, 255);\n    p5.noFill();\n\n    const values = analyzer.getValue();\n    p5.beginShape();\n    for (let i = 0; i < values.length; i++) {\n      const amplitude = values[i] as number;\n      const x = p5.map(i-(values.length/2), 0, values.length - 1, 0, width);\n      const y = height / 16 + amplitude * height;\n      // Place vertex\n      p5.vertex(x, y);\n    }\n    p5.endShape();\n  },\n);\n","// 3rd party library imports\r\nimport P5 from 'p5';\r\nimport * as Tone from 'tone';\r\n\r\n// project imports\r\nimport {Visualizer} from '../Visualizers';\r\n\r\nexport const RGBCirclesVisualizer = new Visualizer(\r\n    'RGBCircles (developer-soni)',\r\n    (p5: P5, analyzer: Tone.Analyser) => {\r\n        const width = 150;\r\n        const height = 150;\r\n        const strokeColors = ['#fff700', '#4000ff', '#00ff08', '#ff0000']\r\n        const color = strokeColors[Math.floor(Math.random() * (strokeColors.length + 1))];\r\n\r\n        p5.background('#383737');\r\n        p5.stroke(String(color));\r\n        const values = analyzer.getValue();\r\n        p5.beginShape();\r\n\r\n        for (let i = 0; i < Math.min(values.length, 255); i++) {\r\n            const amplitude = values[i] as number;\r\n            const x = p5.map(i, 0, values.length - 1, 0, width / 2);\r\n            // const y = height / 2 + amplitude * height;\r\n            const y = p5.map(i, 0, values.length - 1, 0, height / 2);\r\n            const xAngle = p5.map(i, 0, x, -4 * Math.PI, 4 * Math.PI,);\r\n            const yAngle = p5.map(i, 0, y, -4 * Math.PI, 4 * Math.PI,);\r\n            const angle = xAngle * (x / width) + yAngle * (y / height);\r\n\r\n            for (let j = 0; j < 10; j++) {\r\n                const myX = (width*-4) - width / 2 * p5.cos(2 * Math.PI * amplitude + angle);\r\n                const myY = (height*-0.5) - height / 2 * p5.sin(2 * Math.PI * -1 * amplitude + angle);\r\n                p5.circle(myX + j * 115, myY, 5); // draw particle\r\n                p5.circle(myX + j * 115, myY + 1 * 150, 5); // draw particle\r\n            }\r\n        }\r\n\r\n        p5.endShape();\r\n    },\r\n);","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport {Visualizer} from '../Visualizers';\n\nfunction Dub(p5: P5, analyzer: Tone.Analyser) {\n  const width = window.innerWidth;\n  const height = window.innerHeight / 2;\n  const dim = Math.min(width, height);\n  const colors = ['blue', 'white', 'yellow', 'red']\n\n  p5.background('black');\n\n  p5.strokeWeight(dim * 0.01);\n\n  const values = analyzer.getValue();\n  p5.beginShape();\n\n  for (let j = 0; j < colors.length; j++) {\n    p5.translate(-170*j, 17);\n    p5.rotateX(p5.frameCount*0.01*j);\n    p5.rotateY(p5.frameCount*0.03*j);\n    p5.stroke(colors[j]);\n    p5.fill(colors[j]);\n    for (let i = 0; i < values.length; i++) {\n      const amplitude = values[i] as number;\n      p5.box(amplitude*100*(j+1), amplitude*100*(j+1), amplitude*100*(j+1));\n    }\n  }\n\n  p5.endShape();\n}\n\nexport const DubVisualizer = new Visualizer('Dub (adam-bel)', Dub);","export default __webpack_public_path__ + \"static/media/flute.dc30191d.png\";","// 3rd party library imports\r\nimport * as Tone from 'tone';\r\nimport classNames from 'classnames';\r\nimport { List, Range } from 'immutable';\r\nimport React, { useEffect } from 'react';\r\n\r\n// project imports\r\nimport { Instrument, InstrumentProps } from '../Instruments';\r\nimport { OmniOscillatorOptions } from \"tone/Tone/source/oscillator/OscillatorInterface\";\r\nimport { RecursivePartial } from \"tone/Tone/core/util/Interface\";\r\nimport image from './../img/flute.png';\r\n\r\n/** ------------------------------------------------------------------------ **\r\n * Contains implementation of components for Flute.\r\n ** ------------------------------------------------------------------------ */\r\n\r\ninterface FluteKeyProps {\r\n    note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\r\n    duration?: string;\r\n    synth?: Tone.Synth; // Contains library code for making sound\r\n    minor?: boolean; // True if minor key, false if major key\r\n    octave: number;\r\n    index: number; // octave + index together give a location for the Flute key\r\n}\r\n\r\nexport function FluteKey({\r\n    note,\r\n    synth,\r\n    minor,\r\n    index,\r\n}: FluteKeyProps): JSX.Element {\r\n    /**\r\n     * This React component corresponds to either a major or minor key in the Flute.\r\n     */\r\n    return (\r\n        // Observations:\r\n        // 1. The JSX refers to the HTML-looking syntax within TypeScript.\r\n        // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\r\n        // 3. The curly braces `{` and `}` should remind you of string interpolation.\r\n        <div\r\n            onMouseDown={() => synth?.triggerAttack(`${note}`)} // Question: what is `onMouseDown`?\r\n            onMouseUp={() => synth?.triggerRelease('+0.25')} // Question: what is `onMouseUp`?\r\n            className={classNames('ba pointer absolute dim', {\r\n                'bg-black black h3': minor, // minor keys are black\r\n                'black bg-white h4': !minor, // major keys are white\r\n            })}\r\n            style={{\r\n                // CSS\r\n                top: 0,\r\n                left: `${index * 2}rem`,\r\n                zIndex: minor ? 1 : 0,\r\n                width: minor ? '1.5rem' : '2rem',\r\n                marginLeft: minor ? '0.25rem' : 0,\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nfunction Flute({ synth, setSynth }: InstrumentProps): JSX.Element {\r\n    const keys = List([\r\n        { note: 'C', idx: 0 },\r\n        { note: 'Db', idx: 0.5 },\r\n        { note: 'D', idx: 1 },\r\n        { note: 'Eb', idx: 1.5 },\r\n        { note: 'E', idx: 2 },\r\n        { note: 'F', idx: 3 },\r\n        { note: 'Gb', idx: 3.5 },\r\n        { note: 'G', idx: 4 },\r\n        { note: 'Ab', idx: 4.5 },\r\n        { note: 'A', idx: 5 },\r\n        { note: 'Bb', idx: 5.5 },\r\n        { note: 'B', idx: 6 },\r\n    ]);\r\n\r\n    // Tone created with : https://tonejs.github.io/examples/simpleSynth\r\n    const setOscillator = () => {\r\n        setSynth(oldSynth => {\r\n            oldSynth.disconnect();\r\n            return new Tone.Synth({\r\n                \"volume\": 7,\r\n                \"detune\": 0,\r\n                \"portamento\": 0,\r\n                \"envelope\": {\r\n                    \"attack\": 1,\r\n                    \"attackCurve\": \"cosine\",\r\n                    \"decay\": 2,\r\n                    \"decayCurve\": \"linear\",\r\n                    \"release\": 1,\r\n                    \"releaseCurve\": \"exponential\",\r\n                    \"sustain\": 0\r\n                },\r\n                \"oscillator\": {\r\n                    \"partialCount\": 3,\r\n                    \"partials\": [\r\n                        0.000048225308641975394,\r\n                        0.007236810378086416,\r\n                        1\r\n                    ],\r\n                    \"phase\": 3,\r\n                    \"type\": \"fatcustom\",\r\n                    \"count\": 5,\r\n                    \"spread\": 1\r\n                } as RecursivePartial<OmniOscillatorOptions>,\r\n            }).toDestination();\r\n        }\r\n        )\r\n            ;\r\n    };\r\n\r\n    useEffect(setOscillator, [setSynth]);\r\n\r\n    return (\r\n        <div className=\"pv4\">\r\n            <div className={\"image\"}>\r\n                <img src={image} alt={\"Flute\"} />\r\n            </div>\r\n            <div className=\"relative dib h4 w-100 ml4\">\r\n                {Range(2, 7).map(octave =>\r\n                    keys.map(key => {\r\n                        const isMinor = key.note.indexOf('b') !== -1;\r\n                        const note = `${key.note}${octave}`;\r\n                        return (\r\n                            <FluteKey\r\n                                key={note} //react key\r\n                                note={note}\r\n                                synth={synth}\r\n                                minor={isMinor}\r\n                                octave={octave}\r\n                                index={(octave - 2) * 7 + key.idx}\r\n                            />\r\n                        );\r\n                    }),\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport const FluteInstrument = new Instrument('Flute (developer-soni)', Flute);\r\n","export default __webpack_public_path__ + \"static/media/violin.35c8fedd.jpg\";","// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport {List, Range} from 'immutable';\nimport React, {useEffect} from 'react';\n\n// project imports\nimport {Instrument, InstrumentProps} from '../Instruments';\nimport {RecursivePartial} from \"tone/Tone/core/util/Interface\";\nimport {OmniOscillatorOptions} from \"tone/Tone/source/oscillator/OscillatorInterface\";\nimport image from './../img/violin.jpg';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Violin.\n ** ------------------------------------------------------------------------ */\n\ninterface ViolinKeyProps {\n  note: string; \n  duration?: string;\n  synth?: Tone.Synth; \n  minor?: boolean; \n  octave: number;\n  index: number; \n  topDi: number;\n  leftDi: number; \n  rota: string; \n}\n\nexport function ViolinKey({note, synth, minor, index, topDi, leftDi, rota}: ViolinKeyProps): JSX.Element {\n  return (\n    <div\n      style={{\n        transform: rota\n      }}>\n      <div\n        onMouseDown={() => synth?.triggerAttack(`${note}`)} \n        onMouseUp={() => synth?.triggerRelease('+0.1')}\n        className={classNames('ba pointer absolute dim')}\n        style={{\n          top: topDi,\n          transform: \"rotate(0deg)\",\n          left: `${leftDi}rem`,\n          zIndex: 0,\n          marginLeft: minor ? '0.25rem' : 0,\n          background: \"#C8C9C5\",\n          height: '10px',\n          width: \"20px\",\n          borderRadius: \"6px\"\n        }}>\n      </div>\n    </div>\n  );\n}\n\nfunction Violin({synth, setSynth}: InstrumentProps): JSX.Element {\n  const keys = List([\n    { note: 'C', idx: 0 },\n    { note: 'Db', idx: 0.5 },\n    { note: 'D', idx: 1 },\n    { note: 'Eb', idx: 1.5 },\n    { note: 'E', idx: 2 },\n    { note: 'F', idx: 3 },\n    { note: 'Gb', idx: 3.5 },\n    { note: 'G', idx: 4 },\n    { note: 'Ab', idx: 4.5 },\n    { note: 'A', idx: 5 },\n    { note: 'Bb', idx: 5.5 },\n    { note: 'B', idx: 6 },\n  ]);\n\n  const setOscillator = () => {\n    setSynth(oldSynth => {\n      oldSynth.disconnect();\n      return new Tone.Synth({\n        \"volume\": 5,\n        \"detune\": 0,\n        \"portamento\": 0,\n        \"envelope\": {\n          \"attack\": 2,\n          \"attackCurve\": \"cosine\",\n          \"decay\": 0.1,\n          \"decayCurve\": \"linear\",\n          \"release\": 0.2,\n          \"releaseCurve\": \"cosine\",\n          \"sustain\": 0.2\n        },\n        \"oscillator\": {\n          \"partialCount\": 5,\n          \"partials\": [\n            1,\n            0.8434636622299384,\n            0.000244140625,\n            0.31640625,\n            0.0625\n          ],\n          \"phase\": 8,\n          \"type\": \"custom\"\n        } as RecursivePartial<OmniOscillatorOptions>,\n      }).toDestination();}\n    );\n  };\n\n  useEffect(setOscillator, [setSynth]);\n\n  return (\n    <div className=\"pv4\">\n      <div className={\"image\"}>\n        <img src={image} alt={\"Violin\"} style={{\n          position: 'absolute',\n          top: window.innerHeight/16,\n          left: window.innerWidth/8\n        }}/>\n      </div>\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(3, 4).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave+1}`;\n            if (isMinor) {\n              return null\n            } \n            return (\n              <ViolinKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave+1}\n                index={(octave - 2) * 7 + key.idx}\n                topDi={125}\n                leftDi={(((octave - 2) * 7 + key.idx) * 2)+20}\n                rota={\"rotate(1.5deg)\"}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(4, 5).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave+1}`;\n            if (isMinor) {\n              return null\n            }\n            return (\n              <ViolinKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave+1}\n                index={(octave - 2) * 7 + key.idx}\n                topDi={3}\n                leftDi={(((octave - 2) * 7 + key.idx) * 2)+3}\n                rota={\"rotate(0deg)\"}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(5, 6).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave+1}`;\n            if (isMinor) {\n              return null\n            }\n            return (\n              <ViolinKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave+1}\n                index={(octave - 2) * 7 + key.idx}\n                topDi={-120}\n                leftDi={(((octave - 2) * 7 + key.idx) * 2)-11}\n                rota={\"rotate(0deg)\"}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(6, 7).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave+1}`;\n            if (isMinor) {\n              return null\n            }\n            return (\n              <ViolinKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave+1}\n                index={(octave - 2) * 7 + key.idx}\n                topDi={-240}\n                leftDi={(((octave - 2) * 7 + key.idx) * 2)-22}\n                rota={\"rotate(-1.5deg)\"}\n              />\n            );\n          }),\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport const ViolinInstrument = new Instrument('Violin (adam-bel)', Violin);","// 3rd party\nimport { List, Map } from 'immutable';\n\n// project dependencies\nimport { PianoInstrument } from './instruments/Piano';\nimport { WaveformVisualizer } from './visualizers/Waveform';\nimport { RGBCirclesVisualizer } from \"./visualizers/developer-soni\";\nimport { DubVisualizer } from \"./visualizers/adam-bel\";\nimport { FluteInstrument } from \"./instruments/developer-soni\";\nimport { ViolinInstrument } from \"./instruments/adam-bel\";\n\n/** ------------------------------------------------------------------------ **\n * The entire application state is stored in AppState.\n ** ------------------------------------------------------------------------ */\n\n/**\n * Observation: pure map (compare and contrast with impure map)\n *\n * 'instrument': Instrument\n * 'visualizer': Visualizer\n * 5, 'O mio babbino caro', 'B4 C5 D4 B4 C5 D4 G4 A4 B4 B4 C5 D4 C4 C4 B4 B4', 'Puccini', 'Classic', 'The Most Relaxiing Feel'\n */\nexport type AppState = Map<string, any>;\n\nconst instruments = List([PianoInstrument, FluteInstrument, ViolinInstrument]);\nconst visualizers = List([WaveformVisualizer, RGBCirclesVisualizer, DubVisualizer]);\n//var songs = List([{'id': '2', 'songTitle': 'New Age Track', 'notes': 'B4 B4 D4 B4 B4 D4 G4 A4 B4 B4 D4 C4 C4 C4 B4 B4', 'artist': 'The Reacts', 'genre': 'DubStep', 'album': 'FrontEnd Rocks'}, {'id': '1', 'songTitle': 'Ode to Joy (Dubstep Remix)', 'notes': 'E4 E4 F4 G4 G4 F4 E4 D4 C4 C4 D4 E4 E4 D4 D4'}, {'id': '3', 'songTitle': 'Allegro', 'notes': 'C3 D6 D4 B4 D6 C3 G4 A4 C3 D6 D4 C4 D6 C4 B4 B4', 'artist': 'Mozart', 'genre': 'Classic', 'album': 'Eine kleine Nachtmusik'}, {'id': '4', 'songTitle': 'Fur Elise', 'notes': 'C7 D7 A4 B4 C7 D7 A4 B4 C7 D7 A4 B4 C7 D7 A4 B4', 'artist': 'Beeethoven', 'genre': 'Classic', 'album': 'Fur Elise'}, {'id': '5', 'songTitle': 'O mio babbino caro', 'notes': 'B4 C5 D4 B4 C5 D4 G4 A4 B4 B4 C5 D4 C4 C4 B4 B4', 'artist': 'Puccini', 'genre': 'Classic', 'album': 'The Most Relaxiing Feel'}])\nexport const defaultState: AppState = Map<string, any>({\n    instruments,\n    visualizers,\n    //songs\n});\n","import { io as newSocket, Socket as SocketIO } from 'socket.io-client';\n\nconst SOCKET_URL = 'ws://localhost:3001';\n\nconst SOCKET_OPTS = {\n  transports: ['websocket'],\n  path: '/ws',\n  autoConnect: true,\n  reconnection: true,\n  timeout: 10000,\n};\n\nlet idCounter = 1;\n\nexport async function send(\n  socket: Socket,\n  name: string,\n  msg: any,\n): Promise<any> {\n  const _id = idCounter++;\n\n  return new Promise((resolve, reject) => {\n    socket.once(`${name}.${_id}`, resp => {\n      const { error, ...success } = resp;\n      if (success) {\n        resolve(success);\n      } else {\n        reject(error);\n      }\n    });\n    socket.emit(name, { _id, ...msg });\n  });\n}\n\n\nexport type Socket = SocketIO;\n\nexport function initializeSocket(\n  onConnect: (socket: Socket) => void,\n  onDisconnect: () => void,\n): Socket {\n  const socket = newSocket(SOCKET_URL, SOCKET_OPTS);\n\n  socket.on('connect', () => onConnect(socket));\n  socket.on('disconnect', onDisconnect);\n\n  return socket;\n}\n","// 3rd party library imports\nimport { useReducer, useEffect } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\n// project imports\nimport { MainPage } from './MainPage';\nimport { DispatchAction, appReducer } from './Reducer';\nimport { defaultState } from './State';\nimport { initializeSocket, send } from './Socket';\n\n// css imports\nimport 'animate.css';\n\n/** ------------------------------------------------------------------------ **\n * App component\n ** ------------------------------------------------------------------------ */\n\nfunction App() {\n  const [state, dispatch] = useReducer(appReducer, defaultState);\n\n  useEffect(() => {\n    initializeSocket(\n      async socket => {\n        dispatch(new DispatchAction('SET_SOCKET', { socket }));\n        const { songs } = await send(socket, 'get_songs', {});\n        dispatch(new DispatchAction('SET_SONGS', { songs }));\n      },\n      () => {\n        dispatch(new DispatchAction('DELETE_SOCKET'));\n      },\n    );\n  }, []);\n\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\">\n          <MainPage state={state} dispatch={dispatch} />\n        </Route>\n        <Route path=\"/:instrument\">\n          <MainPage state={state} dispatch={dispatch} />\n        </Route>\n        <Route path=\"*\">\n          <div>404</div>\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// 3rd party library imports\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// project imports\nimport App from './App';\n\n// CSS\nimport './index.css';\nimport './tachyons.css';\n\n\n/** ------------------------------------------------------------------------ **\n * Entry point.\n ** ------------------------------------------------------------------------ */\n\nfunction onReactLoaded() {\n  console.log('React has loaded.');\n}\n\nconst rootEl = document.getElementById('root');\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootEl,  // Insert into DOM here\n  onReactLoaded,\n);\n"],"sourceRoot":""}