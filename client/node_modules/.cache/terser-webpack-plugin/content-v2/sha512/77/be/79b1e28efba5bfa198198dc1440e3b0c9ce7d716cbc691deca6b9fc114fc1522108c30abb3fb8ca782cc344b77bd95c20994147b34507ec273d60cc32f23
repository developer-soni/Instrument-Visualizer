{"code":"(this.webpackJsonplambdavibe=this.webpackJsonplambdavibe||[]).push([[0],{115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){\"use strict\";n.r(t);var i=n(0),a=n.n(i),c=n(58),s=n.n(c),r=n(3),o=n.n(r),l=n(6),d=n(7),u=n(30),b=n(10),j=n(12),m=n(119),h=n(2),f=n(8),v=function e(t,n){Object(h.a)(this,e),this.type=void 0,this.args=void 0,this.type=t,this.args=Object(f.d)(n)};function x(e,t){var n=t.type,i=t.args;console.debug(\"\".concat(n));var a=function(){switch(n){case\"SET_SOCKET\":var t=e.get(\"socket\");return t&&t.close(),e.set(\"socket\",i.get(\"socket\"));case\"DELETE_SOCKET\":return e.delete(\"socket\");case\"SET_SONGS\":var a=i.get(\"songs\");return e.set(\"songs\",a);case\"PLAY_SONG\":var c=e.get(\"songs\").find((function(e){return e.get(\"id\")===i.get(\"id\")}));console.log(c);var s=c.get(\"notes\");return e.set(\"notes\",s).set(\"playingSong\",c);case\"STOP_SONG\":return e.delete(\"notes\");case\"SET_LOCATION\":var r,o=i.getIn([\"location\",\"pathname\"],\"\"),l=i.getIn([\"location\",\"search\"],\"\"),d=o.substring(1),u=null!==(r=new URLSearchParams(l.substring(1)).get(\"visualizer\"))&&void 0!==r?r:\"\",b=e.get(\"instruments\"),j=e.get(\"visualizers\"),m=b.find((function(e){return e.name===d})),h=j.find((function(e){return e.name===u}));return e.set(\"instrument\",m).set(\"visualizer\",h);default:return console.error(\"type unknown: \".concat(n,\"\\n\"),i.toJS()),e}}();return console.debug(a.update(\"socket\",(function(e){return e?\"[socket]\":e})).toJS()),a}var O=n(5),p=function e(t,n){Object(h.a)(this,e),this.name=void 0,this.component=void 0,this.name=t,this.component=n};function g(e){var t=e.name;return Object(O.jsx)(\"div\",{className:\"w-100 h3 bb b--light-gray flex justify-between items-center ph4\",children:Object(O.jsx)(\"div\",{children:t})})}var w=function(e){var t=e.instrument,n=e.state,a=e.dispatch,c=t.component,s=Object(i.useState)(new j.c({oscillator:{type:\"sine\"}}).toDestination()),r=Object(d.a)(s,2),o=r[0],l=r[1],u=n.get(\"notes\");return Object(i.useEffect)((function(){if(u&&o){var e=u.split(\" \"),t=e.map((function(e,t){return{idx:t,time:\"+\".concat(t/4),note:e,velocity:1}}));return new j.b((function(t,n){o.triggerAttackRelease(n.note,\"4n\",t,n.velocity),n.idx===e.length-1&&a(new v(\"STOP_SONG\"))}),t).start(0),j.d.start(),function(){j.d.cancel()}}return function(){}}),[u,o,a]),Object(O.jsxs)(\"div\",{children:[Object(O.jsx)(g,{name:t.name}),Object(O.jsx)(\"div\",{className:\"bg-white absolute right-0 left-0\",style:{top:\"4rem\"},children:Object(O.jsx)(c,{name:t.name,state:n,dispatch:a,synth:o,setSynth:l})})]})},N=n(23),y=n.n(N),k=n(118),S=function(e){var t=e.title,n=e.children;return Object(O.jsxs)(\"div\",{className:\"flex flex-column bb b--light-gray pa3 customHeight\",children:[Object(O.jsxs)(\"div\",{className:\"fw7 mb2\",children:[t,\" \"]}),Object(O.jsx)(\"div\",{className:\"flex-auto overflow-scroll\",children:n})]})};function C(e){var t=e.to,n=e.text,i=e.active,a=e.onClick;return Object(O.jsx)(u.b,{to:t,className:\"no-underline\",children:Object(O.jsxs)(\"div\",{className:y()(\"f6 flex items-center black\",{fw7:i}),onClick:a,children:[i?Object(O.jsx)(k.b,{className:\"mr1\"}):Object(O.jsx)(k.a,{className:\"mr1\"}),Object(O.jsx)(\"div\",{className:\"dim\",children:n})]})})}function D(e){var t,n=e.state,i=n.get(\"instruments\"),a=null===(t=n.get(\"instrument\"))||void 0===t?void 0:t.name,c=Object(b.f)();return Object(O.jsx)(S,{title:\"Instruments\",children:i.map((function(e){return Object(O.jsx)(C,{to:\"/\".concat(e.name).concat(c.search),text:e.name,active:e.name===a,onClick:function(){return console.log(e.name)}},e.name)}))})}function E(e){var t,n=e.state,i=n.get(\"visualizers\"),a=null===(t=n.get(\"visualizer\"))||void 0===t?void 0:t.name,c=Object(b.f)();return Object(O.jsx)(S,{title:\"Visualizers\",children:i.map((function(e){return Object(O.jsx)(C,{to:{pathname:c.pathname,search:\"?visualizer=\".concat(e.name)},text:e.name,active:e.name===a,onClick:function(){return console.log(e.name)}},e.name)}))})}function _(e){var t=e.state,n=e.dispatch,a=Object(i.useState)(Object(f.a)()),c=Object(d.a)(a,2),s=c[0],r=c[1];Object(i.useEffect)((function(){var e=t.get(\"songs\",Object(f.a)());e.size>0&&r(e)}),[t]);return Object(O.jsxs)(i.Fragment,{children:[Object(O.jsx)(T,{onChangeHandler:function(e){var n,i=null!==(n=e.target.value)&&void 0!==n?n:\"\",a=i?s.filter((function(e){return e.get(\"songTitle\").toUpperCase().startsWith(i.toUpperCase())})):t.get(\"songs\",Object(f.a)());a&&r(a)}}),Object(O.jsx)(S,{title:\"Playlist\",children:s.map((function(e){return Object(O.jsxs)(\"div\",{className:\"f6 pointer underline flex items-center no-underline i dim\",onClick:function(){return n(new v(\"PLAY_SONG\",{id:e.get(\"id\")}))},children:[Object(O.jsx)(m.a,{className:\"mr1\"}),e.get(\"songTitle\")]},e.get(\"id\"))}))})]})}function T(e){var t=e.onChangeHandler;return Object(O.jsxs)(\"div\",{className:\"pa2 b--light-gray mb1 mr3\",children:[Object(O.jsx)(\"h4\",{className:\"fw7 mb2\",children:\"Search songs\"}),Object(O.jsx)(\"input\",{type:\"text\",maxLength:50,onChange:t})]})}function z(e){var t,n,a,c=e.state.get(\"playingSong\",Object(f.d)({})).toJSON();return Object(O.jsx)(i.Fragment,{children:c.songTitle&&Object(O.jsxs)(\"div\",{className:\"songDetails overflow-scroll\",children:[Object(O.jsx)(\"h3\",{className:\"fw7 mb2\",children:c.songTitle}),Object(O.jsxs)(\"div\",{className:\"songDetails__element\",children:[Object(O.jsx)(\"span\",{children:Object(O.jsx)(\"b\",{children:\"Artist :\"})}),Object(O.jsx)(\"span\",{className:\"songDetails__element-detail\",children:null!==(t=c.artist)&&void 0!==t?t:\"Not Available\"})]}),Object(O.jsxs)(\"div\",{className:\"songDetails__element\",children:[Object(O.jsx)(\"span\",{children:Object(O.jsx)(\"b\",{children:\"Album : \"})}),Object(O.jsx)(\"span\",{className:\"songDetails__element-detail\",children:null!==(n=c.album)&&void 0!==n?n:\"Not Available\"})]}),Object(O.jsxs)(\"div\",{className:\"songDetails__element\",children:[Object(O.jsx)(\"span\",{children:Object(O.jsx)(\"b\",{children:\"Genre : \"})}),Object(O.jsx)(\"span\",{className:\"songDetails__element-detail\",children:null!==(a=c.genre)&&void 0!==a?a:\"Not Available\"})]})]})})}function M(e){var t=e.state,n=e.dispatch;return Object(O.jsxs)(\"div\",{className:\"absolute top-0 left-0 bottom-0 w5 z-1 shadow-1 bg-white flex flex-column\",children:[Object(O.jsx)(\"div\",{className:\"h3 fw7 f5 flex items-center pl3 bb b--light-gray\",children:\"Temp Instrument\"}),Object(O.jsxs)(\"div\",{className:\"flex-auto\",children:[Object(O.jsx)(D,{state:t,dispatch:n}),Object(O.jsx)(E,{state:t,dispatch:n}),Object(O.jsx)(_,{state:t,dispatch:n}),Object(O.jsx)(z,{state:t,dispatch:n}),\" \"]})]})}var A=n(60),I=n.n(A),G=function e(t,n){Object(h.a)(this,e),this.name=void 0,this.draw=void 0,this.name=t,this.draw=n};function P(e){var t=e.visualizer,n=t.name,a=t.draw,c=Object(i.useMemo)((function(){return new j.a(\"waveform\",256)}),[]),s=Object(i.useCallback)((function(e){var t=window.innerWidth,n=window.innerHeight/2;e.resizeCanvas(t,n,!1)}),[]);Object(i.useEffect)((function(){return j.e().volume.value=-5,j.e().connect(c),function(){j.e().disconnect(c)}}),[c]);return Object(O.jsxs)(\"div\",{className:\"bg-black absolute bottom-0 right-0 left-0 h-50\",children:[Object(O.jsx)(\"div\",{className:\"z-1 absolute left-0 top-0 pa4 white f5\",children:n}),Object(O.jsx)(I.a,{setup:function(e,t){var n=window.innerWidth,i=window.innerHeight/2;e.createCanvas(n,i,e.WEBGL).parent(t)},draw:function(e){return a(e,c)},windowResized:s})]})}function L(e){var t=e.state,n=e.dispatch,i=t.get(\"instrument\");return Object(O.jsx)(\"div\",{children:i&&Object(O.jsx)(w,{state:t,dispatch:n,instrument:i})})}function R(e){var t=e.state.get(\"visualizer\");return Object(O.jsx)(\"div\",{children:t&&Object(O.jsx)(P,{visualizer:t},t.name)})}function W(e){var t=e.state,n=e.dispatch;return Object(O.jsxs)(\"div\",{className:\"absolute right-0 bottom-0 top-0 flex flex-column\",style:{left:\"16rem\"},children:[Object(O.jsx)(L,{state:t,dispatch:n}),Object(O.jsx)(R,{state:t,dispatch:n})]})}function B(){return Object(O.jsx)(\"div\",{className:\"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center\",style:{left:\"16rem\"},children:Object(O.jsxs)(\"div\",{className:\"mw6 lh-copy mb4\",children:[Object(O.jsx)(m.b,{}),Object(O.jsx)(\"div\",{className:\"f3 fw7 mb2\",children:\"Welcome to the case study.\"}),Object(O.jsx)(\"div\",{className:\"f4 mb3\",children:\"Select an instrument and a visualizer on the left to serve some fresh beats.\"}),Object(O.jsx)(\"div\",{className:\"f5\",children:\"The UI is yours to design. Express yourself.\"})]})})}function F(e){var t=e.state,n=e.dispatch,a=Object(b.f)(),c=!t.get(\"instrument\");return console.log(\"INSTRUMENT\",c),Object(i.useEffect)((function(){n(new v(\"SET_LOCATION\",{location:a}))}),[n,a]),Object(O.jsxs)(\"div\",{className:\"fixed top-0 left-0 h-100 w-100 bg-white\",onClick:function(){return j.f()},children:[Object(O.jsx)(M,{state:t,dispatch:n}),c?Object(O.jsx)(B,{}):Object(O.jsx)(W,{state:t,dispatch:n})]})}function H(e){var t=e.note,n=e.synth,i=e.minor,a=e.index;return Object(O.jsx)(\"div\",{onMouseDown:function(){return null===n||void 0===n?void 0:n.triggerAttack(\"\".concat(t))},onMouseUp:function(){return null===n||void 0===n?void 0:n.triggerRelease(\"+0.25\")},className:y()(\"ba pointer absolute dim\",{\"bg-black black h3\":i,\"black bg-white h4\":!i}),style:{top:0,left:\"\".concat(2*a,\"rem\"),zIndex:i?1:0,width:i?\"1.5rem\":\"2rem\",marginLeft:i?\"0.25rem\":0}})}function U(e){var t=e.title,n=e.onClick,i=e.active;return Object(O.jsx)(\"div\",{onClick:n,className:y()(\"dim pointer ph2 pv1 ba mr2 br1 fw7 bw1\",{\"b--black black\":i,\"gray b--light-gray\":!i}),children:t})}var V=new p(\"Piano\",(function(e){var t=e.synth,n=e.setSynth,i=Object(f.a)([{note:\"C\",idx:0},{note:\"Db\",idx:.5},{note:\"D\",idx:1},{note:\"Eb\",idx:1.5},{note:\"E\",idx:2},{note:\"F\",idx:3},{note:\"Gb\",idx:3.5},{note:\"G\",idx:4},{note:\"Ab\",idx:4.5},{note:\"A\",idx:5},{note:\"Bb\",idx:5.5},{note:\"B\",idx:6}]),a=Object(f.a)([\"sine\",\"sawtooth\",\"square\",\"triangle\",\"fmsine\",\"fmsawtooth\",\"fmtriangle\",\"amsine\",\"amsawtooth\",\"amtriangle\"]);return Object(O.jsxs)(\"div\",{className:\"pv4\",children:[Object(O.jsx)(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(f.c)(2,7).map((function(e){return i.map((function(n){var i=-1!==n.note.indexOf(\"b\"),a=\"\".concat(n.note).concat(e);return Object(O.jsx)(H,{note:a,synth:t,minor:i,octave:e,index:7*(e-2)+n.idx},a)}))}))}),Object(O.jsx)(\"div\",{className:\"pl4 pt4 flex\",children:a.map((function(e){return Object(O.jsx)(U,{title:e,onClick:function(){return t=e,void n((function(e){return e.disconnect(),new j.c({oscillator:{type:t}}).toDestination()}));var t},active:(null===t||void 0===t?void 0:t.oscillator.type)===e},e)}))})]})})),J=new G(\"Waveform\",(function(e,t){var n=window.innerWidth,i=window.innerHeight/2,a=Math.min(n,i);e.background(0,0,0,255),e.strokeWeight(.01*a),e.stroke(255,255,255,255),e.noFill();var c=t.getValue();e.beginShape();for(var s=0;s<c.length;s++){var r=c[s],o=e.map(s-c.length/2,0,c.length-1,0,n),l=i/16+r*i;e.vertex(o,l)}e.endShape()})),K=new G(\"RGBCircles (developer-soni)\",(function(e,t){var n=150,i=150,a=[\"#fff700\",\"#4000ff\",\"#00ff08\",\"#ff0000\"],c=a[Math.floor(Math.random()*(a.length+1))];e.background(\"#383737\"),e.stroke(String(c));var s=t.getValue();e.beginShape();for(var r=0;r<Math.min(s.length,255);r++)for(var o=s[r],l=e.map(r,0,s.length-1,0,75),d=e.map(r,0,s.length-1,0,75),u=e.map(r,0,l,-4*Math.PI,4*Math.PI)*(l/n)+e.map(r,0,d,-4*Math.PI,4*Math.PI)*(d/i),b=0;b<10;b++){var j=-600-75*e.cos(2*Math.PI*o+u),m=-75-75*e.sin(2*Math.PI*-1*o+u);e.circle(j+115*b,m,5),e.circle(j+115*b,m+150,5)}e.endShape()}));var Y=new G(\"Dub (adam-bel)\",(function(e,t){var n=window.innerWidth,i=window.innerHeight/2,a=Math.min(n,i),c=[\"blue\",\"white\",\"yellow\",\"red\"];e.background(\"black\"),e.strokeWeight(.01*a);var s=t.getValue();e.beginShape();for(var r=0;r<c.length;r++){e.translate(-170*r,17),e.rotateX(.01*e.frameCount*r),e.rotateY(.03*e.frameCount*r),e.stroke(c[r]),e.fill(c[r]);for(var o=0;o<s.length;o++){var l=s[o];e.box(100*l*(r+1),100*l*(r+1),100*l*(r+1))}}e.endShape()})),q=n.p+\"static/media/flute.dc30191d.png\";function X(e){var t=e.note,n=e.synth,i=e.minor,a=e.index;return Object(O.jsx)(\"div\",{onMouseDown:function(){return null===n||void 0===n?void 0:n.triggerAttack(\"\".concat(t))},onMouseUp:function(){return null===n||void 0===n?void 0:n.triggerRelease(\"+0.25\")},className:y()(\"ba pointer absolute dim\",{\"bg-black black h3\":i,\"black bg-white h4\":!i}),style:{top:0,left:\"\".concat(2*a,\"rem\"),zIndex:i?1:0,width:i?\"1.5rem\":\"2rem\",marginLeft:i?\"0.25rem\":0}})}var Q=new p(\"Flute (developer-soni)\",(function(e){var t=e.synth,n=e.setSynth,a=Object(f.a)([{note:\"C\",idx:0},{note:\"Db\",idx:.5},{note:\"D\",idx:1},{note:\"Eb\",idx:1.5},{note:\"E\",idx:2},{note:\"F\",idx:3},{note:\"Gb\",idx:3.5},{note:\"G\",idx:4},{note:\"Ab\",idx:4.5},{note:\"A\",idx:5},{note:\"Bb\",idx:5.5},{note:\"B\",idx:6}]);return Object(i.useEffect)((function(){n((function(e){return e.disconnect(),new j.c({volume:7,detune:0,portamento:0,envelope:{attack:1,attackCurve:\"cosine\",decay:2,decayCurve:\"linear\",release:1,releaseCurve:\"exponential\",sustain:0},oscillator:{partialCount:3,partials:[48225308641975394e-21,.007236810378086416,1],phase:3,type:\"fatcustom\",count:5,spread:1}}).toDestination()}))}),[n]),Object(O.jsxs)(\"div\",{className:\"pv4\",children:[Object(O.jsx)(\"div\",{className:\"image\",children:Object(O.jsx)(\"img\",{src:q,alt:\"Flute\"})}),Object(O.jsx)(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(f.c)(2,7).map((function(e){return a.map((function(n){var i=-1!==n.note.indexOf(\"b\"),a=\"\".concat(n.note).concat(e);return Object(O.jsx)(X,{note:a,synth:t,minor:i,octave:e,index:7*(e-2)+n.idx},a)}))}))})]})})),Z=n.p+\"static/media/violin.35c8fedd.jpg\";function $(e){var t=e.note,n=e.synth,i=e.minor,a=(e.index,e.topDi),c=e.leftDi,s=e.rota;return Object(O.jsx)(\"div\",{style:{transform:s},children:Object(O.jsx)(\"div\",{onMouseDown:function(){return null===n||void 0===n?void 0:n.triggerAttack(\"\".concat(t))},onMouseUp:function(){return null===n||void 0===n?void 0:n.triggerRelease(\"+0.1\")},className:y()(\"ba pointer absolute dim\"),style:{top:a,transform:\"rotate(0deg)\",left:\"\".concat(c,\"rem\"),zIndex:0,marginLeft:i?\"0.25rem\":0,background:\"#C8C9C5\",height:\"10px\",width:\"20px\",borderRadius:\"6px\"}})})}var ee=new p(\"Violin (adam-bel)\",(function(e){var t=e.synth,n=e.setSynth,a=Object(f.a)([{note:\"C\",idx:0},{note:\"Db\",idx:.5},{note:\"D\",idx:1},{note:\"Eb\",idx:1.5},{note:\"E\",idx:2},{note:\"F\",idx:3},{note:\"Gb\",idx:3.5},{note:\"G\",idx:4},{note:\"Ab\",idx:4.5},{note:\"A\",idx:5},{note:\"Bb\",idx:5.5},{note:\"B\",idx:6}]);return Object(i.useEffect)((function(){n((function(e){return e.disconnect(),new j.c({volume:5,detune:0,portamento:0,envelope:{attack:2,attackCurve:\"cosine\",decay:.1,decayCurve:\"linear\",release:.2,releaseCurve:\"cosine\",sustain:.2},oscillator:{partialCount:5,partials:[1,.8434636622299384,.000244140625,.31640625,.0625],phase:8,type:\"custom\"}}).toDestination()}))}),[n]),Object(O.jsxs)(\"div\",{className:\"pv4\",children:[Object(O.jsx)(\"div\",{className:\"image\",children:Object(O.jsx)(\"img\",{src:Z,alt:\"Violin\",style:{position:\"absolute\",top:window.innerHeight/16,left:window.innerWidth/8}})}),Object(O.jsx)(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(f.c)(3,4).map((function(e){return a.map((function(n){var i=-1!==n.note.indexOf(\"b\"),a=\"\".concat(n.note).concat(e+1);return i?null:Object(O.jsx)($,{note:a,synth:t,minor:i,octave:e+1,index:7*(e-2)+n.idx,topDi:125,leftDi:2*(7*(e-2)+n.idx)+20,rota:\"rotate(1.5deg)\"},a)}))}))}),Object(O.jsx)(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(f.c)(4,5).map((function(e){return a.map((function(n){var i=-1!==n.note.indexOf(\"b\"),a=\"\".concat(n.note).concat(e+1);return i?null:Object(O.jsx)($,{note:a,synth:t,minor:i,octave:e+1,index:7*(e-2)+n.idx,topDi:3,leftDi:2*(7*(e-2)+n.idx)+3,rota:\"rotate(0deg)\"},a)}))}))}),Object(O.jsx)(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(f.c)(5,6).map((function(e){return a.map((function(n){var i=-1!==n.note.indexOf(\"b\"),a=\"\".concat(n.note).concat(e+1);return i?null:Object(O.jsx)($,{note:a,synth:t,minor:i,octave:e+1,index:7*(e-2)+n.idx,topDi:-120,leftDi:2*(7*(e-2)+n.idx)-11,rota:\"rotate(0deg)\"},a)}))}))}),Object(O.jsx)(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(f.c)(6,7).map((function(e){return a.map((function(n){var i=-1!==n.note.indexOf(\"b\"),a=\"\".concat(n.note).concat(e+1);return i?null:Object(O.jsx)($,{note:a,synth:t,minor:i,octave:e+1,index:7*(e-2)+n.idx,topDi:-240,leftDi:2*(7*(e-2)+n.idx)-22,rota:\"rotate(-1.5deg)\"},a)}))}))})]})})),te=Object(f.a)([V,Q,ee]),ne=Object(f.a)([J,K,Y]),ie=Object(f.b)({instruments:te,visualizers:ne}),ae=n(4),ce=n(21),se=n(61),re=[\"error\"],oe={transports:[\"websocket\"],path:\"/ws\",autoConnect:!0,reconnection:!0,timeout:1e4},le=1;function de(e,t,n){return ue.apply(this,arguments)}function ue(){return(ue=Object(l.a)(o.a.mark((function e(t,n,i){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=le++,e.abrupt(\"return\",new Promise((function(e,c){t.once(\"\".concat(n,\".\").concat(a),(function(t){var n=t.error,i=Object(ce.a)(t,re);i?e(i):c(n)})),t.emit(n,Object(ae.a)({_id:a},i))})));case 2:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}n(114);var be=function(){var e=Object(i.useReducer)(x,ie),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){!function(e,t){var n=Object(se.io)(\"ws://localhost:3001\",oe);n.on(\"connect\",(function(){return e(n)})),n.on(\"disconnect\",t)}(function(){var e=Object(l.a)(o.a.mark((function e(t){var n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(new v(\"SET_SOCKET\",{socket:t})),e.next=3,de(t,\"get_songs\",{});case 3:n=e.sent,i=n.songs,a(new v(\"SET_SONGS\",{songs:i}));case 6:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(){a(new v(\"DELETE_SOCKET\"))}))}),[]),Object(O.jsx)(u.a,{children:Object(O.jsxs)(b.c,{children:[Object(O.jsx)(b.a,{path:\"/\",children:Object(O.jsx)(F,{state:n,dispatch:a})}),Object(O.jsx)(b.a,{path:\"/:instrument\",children:Object(O.jsx)(F,{state:n,dispatch:a})}),Object(O.jsx)(b.a,{path:\"*\",children:Object(O.jsx)(\"div\",{children:\"404\"})})]})})};n(115),n(116);var je=document.getElementById(\"root\");s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(be,{})}),je,(function(){console.log(\"React has loaded.\")}))}},[[117,1,2]]]);","name":"static/js/main.5486bea7.chunk.js","map":{"version":3,"sources":["static/js/main.5486bea7.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","regenerator","regenerator_default","asyncToGenerator","slicedToArray","react_router_dom","react_router","esm","bucket_16","classCallCheck","immutable_es","Reducer_DispatchAction","DispatchAction","type","args","Object","appReducer","state","action","console","debug","concat","newState","oldSocket","get","close","set","delete","songs","song","find","s","log","notes","_URLSearchParams$get","pathname","getIn","search","instrumentName","substring","visualizerName","URLSearchParams","instruments","visualizers","instrument","i","name","visualizer","v","error","toJS","update","jsx_runtime","Instruments_Instrument","Instrument","component","TopNav","_ref","className","children","Instruments_InstrumentContainer","_ref2","dispatch","InstrumentComponent","_useState","oscillator","toDestination","_useState2","synth","setSynth","eachNote","split","noteObjs","map","note","idx","time","velocity","value","triggerAttackRelease","length","start","cancel","style","top","classnames","classnames_default","bucket_19","SideNav_Section","title","RadioButton","to","text","active","onClick","fw7","Instruments","_ref3","_state$get","activeInstrument","location","Visualizers","_ref4","_state$get2","activeVisualizer","Songs","_ref5","setSongs","songsList","size","SongFilter","onChangeHandler","event","_inputElement$value","inputValue","target","filteredSongs","filter","toUpperCase","startsWith","id","props","maxLength","onChange","SongDetails","_ref6","_song$artist","_song$album","_song$genre","toJSON","songTitle","artist","album","genre","SideNav","_ref7","build","build_default","Visualizers_Visualizer","Visualizer","draw","VisualizerContainer","_draw","analyzer","onResize","p5","width","window","innerWidth","height","innerHeight","resizeCanvas","volume","connect","disconnect","a","setup","canvasParentRef","createCanvas","WEBGL","parent","windowResized","InstrumentPanel","VisualizerPanel","InstrumentAndVisualizer","left","ShowWelcome","MainPage","isWelcome","PianoKey","minor","index","onMouseDown","triggerAttack","onMouseUp","triggerRelease","zIndex","marginLeft","PianoType","PianoInstrument","keys","oscillators","octave","key","isMinor","indexOf","o","newType","oldSynth","WaveformVisualizer","dim","Math","min","background","strokeWeight","stroke","noFill","values","getValue","beginShape","amplitude","x","y","vertex","endShape","RGBCirclesVisualizer","strokeColors","color","floor","random","String","angle","PI","j","myX","cos","myY","sin","circle","DubVisualizer","colors","translate","rotateX","frameCount","rotateY","fill","box","flute","p","FluteKey","FluteInstrument","detune","portamento","envelope","attack","attackCurve","decay","decayCurve","release","releaseCurve","sustain","partialCount","partials","phase","count","spread","src","alt","violin","ViolinKey","topDi","leftDi","rota","transform","borderRadius","ViolinInstrument","position","State_instruments","State_visualizers","defaultState","objectSpread2","objectWithoutProperties","socket_io_client_build","_excluded","SOCKET_OPTS","transports","path","autoConnect","reconnection","timeout","idCounter","send","_x","_x2","_x3","_send","apply","arguments","mark","_callee","socket","msg","_id","wrap","_context","prev","next","abrupt","Promise","resolve","reject","once","resp","success","emit","stop","src_App","_useReducer","_useReducer2","onConnect","onDisconnect","on","initializeSocket","_yield$send","sent","rootEl","document","getElementById","render","StrictMode"],"mappings":"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"},"input":"(this[\"webpackJsonplambdavibe\"] = this[\"webpackJsonplambdavibe\"] || []).push([[0],{\n\n/***/ 115:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 116:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 117:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(58);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(3);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(30);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/tone/build/esm/index.js + 936 modules\nvar esm = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/@carbon/icons-react/es/__generated__/bucket-16.js\nvar bucket_16 = __webpack_require__(119);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/immutable/dist/immutable.es.js\nvar immutable_es = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./src/Reducer.tsx\n// 3rd party\n// project deps\nvar Reducer_DispatchAction=function DispatchAction(type,args){Object(classCallCheck[\"a\" /* default */])(this,DispatchAction);this.type=void 0;this.args=void 0;this.type=type;this.args=Object(immutable_es[\"d\" /* fromJS */])(args);};/** ------------------------------------------------------------------------ **\n * Top-level application reducer.\n ** ------------------------------------------------------------------------ */function appReducer(state,action){var type=action.type,args=action.args;console.debug(\"\".concat(type));// Question: Does this function remind of you registering callbacks?\nvar newState=function(){switch(type){case'SET_SOCKET':{var oldSocket=state.get('socket');if(oldSocket){oldSocket.close();}return state.set('socket',args.get('socket'));}case'DELETE_SOCKET':{return state.delete('socket');}case'SET_SONGS':{var songs=args.get('songs');return state.set('songs',songs);}case'PLAY_SONG':{var song=state.get('songs').find(function(s){return s.get('id')===args.get('id');});console.log(song);var notes=song.get('notes');return state.set('notes',notes).set('playingSong',song);}case'STOP_SONG':{return state.delete('notes');}case'SET_LOCATION':{var _URLSearchParams$get;var pathname=args.getIn(['location','pathname'],'');var search=args.getIn(['location','search'],'');var instrumentName=pathname.substring(1);var visualizerName=(_URLSearchParams$get=new URLSearchParams(search.substring(1)).get('visualizer'))!==null&&_URLSearchParams$get!==void 0?_URLSearchParams$get:'';var instruments=state.get('instruments');var visualizers=state.get('visualizers');var instrument=instruments.find(function(i){return i.name===instrumentName;});var visualizer=visualizers.find(function(v){return v.name===visualizerName;});return state.set('instrument',instrument).set('visualizer',visualizer);}default:console.error(\"type unknown: \".concat(type,\"\\n\"),args.toJS());return state;}}();console.debug(newState.update('socket',function(s){return s?'[socket]':s;}).toJS());return newState;}\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(5);\n\n// CONCATENATED MODULE: ./src/Instruments.tsx\n// 3rd party library imports\n// project imports\nvar Instruments_Instrument=function Instrument(name,component){Object(classCallCheck[\"a\" /* default */])(this,Instrument);this.name=void 0;this.component=void 0;this.name=name;this.component=component;};function TopNav(_ref){var name=_ref.name;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:'w-100 h3 bb b--light-gray flex justify-between items-center ph4',children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:name})});}var Instruments_InstrumentContainer=function InstrumentContainer(_ref2){var instrument=_ref2.instrument,state=_ref2.state,dispatch=_ref2.dispatch;var InstrumentComponent=instrument.component;var _useState=Object(react[\"useState\"])(new esm[\"c\" /* Synth */]({oscillator:{type:'sine'}}).toDestination()),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),synth=_useState2[0],setSynth=_useState2[1];var notes=state.get('notes');Object(react[\"useEffect\"])(function(){if(notes&&synth){var eachNote=notes.split(' ');var noteObjs=eachNote.map(function(note,idx){return{idx:idx,time:\"+\".concat(idx/4),note:note,velocity:1};});new esm[\"b\" /* Part */](function(time,value){// the value is an object which contains both the note and the velocity\nsynth.triggerAttackRelease(value.note,'4n',time,value.velocity);if(value.idx===eachNote.length-1){dispatch(new Reducer_DispatchAction('STOP_SONG'));}},noteObjs).start(0);esm[\"d\" /* Transport */].start();return function(){esm[\"d\" /* Transport */].cancel();};}return function(){};},[notes,synth,dispatch]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TopNav,{name:instrument.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:'bg-white absolute right-0 left-0',style:{top:'4rem'},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InstrumentComponent,{name:instrument.name,state:state,dispatch:dispatch,synth:synth,setSynth:setSynth})})]});};\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(23);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./node_modules/@carbon/icons-react/es/__generated__/bucket-19.js\nvar bucket_19 = __webpack_require__(118);\n\n// CONCATENATED MODULE: ./src/SideNav.tsx\n// 3rd party library imports\n// project imports\nvar SideNav_Section=function Section(_ref){var title=_ref.title,children=_ref.children;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"flex flex-column bb b--light-gray pa3 customHeight\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"fw7 mb2\",children:[title,\" \"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"flex-auto overflow-scroll\",children:children})]});};function RadioButton(_ref2){var to=_ref2.to,text=_ref2.text,active=_ref2.active,onClick=_ref2.onClick;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:to,className:\"no-underline\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:classnames_default()('f6 flex items-center black',{fw7:active}),onClick:onClick,children:[active?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(bucket_19[\"b\" /* RadioButtonChecked20 */],{className:\"mr1\"}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(bucket_19[\"a\" /* RadioButton20 */],{className:\"mr1\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"dim\",children:text})]})});}function Instruments(_ref3){var _state$get;var state=_ref3.state;var instruments=state.get('instruments');var activeInstrument=(_state$get=state.get('instrument'))===null||_state$get===void 0?void 0:_state$get.name;var location=Object(react_router[\"f\" /* useLocation */])();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SideNav_Section,{title:\"Instruments\",children:instruments.map(function(i){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RadioButton,{to:\"/\".concat(i.name).concat(location.search),text:i.name,active:i.name===activeInstrument,onClick:function onClick(){return console.log(i.name);}},i.name);})});}function Visualizers(_ref4){var _state$get2;var state=_ref4.state;var visualizers=state.get('visualizers');var activeVisualizer=(_state$get2=state.get('visualizer'))===null||_state$get2===void 0?void 0:_state$get2.name;var location=Object(react_router[\"f\" /* useLocation */])();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SideNav_Section,{title:\"Visualizers\",children:visualizers.map(function(v){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RadioButton,{to:{pathname:location.pathname,search:\"?visualizer=\".concat(v.name)},text:v.name,active:v.name===activeVisualizer,onClick:function onClick(){return console.log(v.name);}},v.name);})});}function Songs(_ref5){var state=_ref5.state,dispatch=_ref5.dispatch;var _useState=Object(react[\"useState\"])(Object(immutable_es[\"a\" /* List */])()),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),songs=_useState2[0],setSongs=_useState2[1];// Songs are stored in the component state\nObject(react[\"useEffect\"])(function(){var songsList=state.get('songs',Object(immutable_es[\"a\" /* List */])());if(songsList.size>0){setSongs(songsList);// Adds the songs from the application state\n}},[state]);// This method is used within the filter component\nvar handleInputChange=function handleInputChange(event){var _inputElement$value;var inputElement=event.target;var inputValue=(_inputElement$value=inputElement.value)!==null&&_inputElement$value!==void 0?_inputElement$value:\"\";var filteredSongs=inputValue?songs.filter(function(song){return song.get('songTitle').toUpperCase().startsWith(inputValue.toUpperCase());}):state.get('songs',Object(immutable_es[\"a\" /* List */])());if(filteredSongs){setSongs(filteredSongs);// Filtered songs are set to this components state\n}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SongFilter,{onChangeHandler:handleInputChange}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SideNav_Section,{title:\"Playlist\",children:songs.map(function(song){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"f6 pointer underline flex items-center no-underline i dim\",onClick:function onClick(){return dispatch(new Reducer_DispatchAction('PLAY_SONG',{id:song.get('id')}));},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(bucket_16[\"a\" /* Music20 */],{className:\"mr1\"}),song.get('songTitle')]},song.get('id'));})})]});}/*\n* This component displays song filter\n* */function SongFilter(props){var onChangeHandler=props.onChangeHandler;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"pa2 b--light-gray mb1 mr3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{className:\"fw7 mb2\",children:\"Search songs\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",maxLength:50,onChange:onChangeHandler})]});}/*\n* This component displays details of the currently playing song\n* */function SongDetails(_ref6){var _song$artist,_song$album,_song$genre;var state=_ref6.state;var song=state.get('playingSong',Object(immutable_es[\"d\" /* fromJS */])({})).toJSON();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react[\"Fragment\"],{children:song.songTitle&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"songDetails overflow-scroll\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{className:\"fw7 mb2\",children:song.songTitle}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"songDetails__element\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Artist :\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"songDetails__element-detail\",children:(_song$artist=song.artist)!==null&&_song$artist!==void 0?_song$artist:'Not Available'})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"songDetails__element\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Album : \"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"songDetails__element-detail\",children:(_song$album=song.album)!==null&&_song$album!==void 0?_song$album:'Not Available'})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"songDetails__element\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Genre : \"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"songDetails__element-detail\",children:(_song$genre=song.genre)!==null&&_song$genre!==void 0?_song$genre:'Not Available'})]})]})});}function SideNav(_ref7){var state=_ref7.state,dispatch=_ref7.dispatch;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"absolute top-0 left-0 bottom-0 w5 z-1 shadow-1 bg-white flex flex-column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"h3 fw7 f5 flex items-center pl3 bb b--light-gray\",children:\"Temp Instrument\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"flex-auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Instruments,{state:state,dispatch:dispatch}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Visualizers,{state:state,dispatch:dispatch}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Songs,{state:state,dispatch:dispatch}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SongDetails,{state:state,dispatch:dispatch}),\" \"]})]});}\n// EXTERNAL MODULE: ./node_modules/react-p5/build/index.js\nvar build = __webpack_require__(60);\nvar build_default = /*#__PURE__*/__webpack_require__.n(build);\n\n// CONCATENATED MODULE: ./src/Visualizers.tsx\n// 3rd party library imports\nvar Visualizers_Visualizer=function Visualizer(name,draw){Object(classCallCheck[\"a\" /* default */])(this,Visualizer);this.name=void 0;this.draw=void 0;this.name=name;this.draw=draw;};function VisualizerContainer(_ref){var visualizer=_ref.visualizer;var name=visualizer.name,_draw=visualizer.draw;var analyzer=Object(react[\"useMemo\"])(function(){return new esm[\"a\" /* Analyser */]('waveform',256);},[]);var onResize=Object(react[\"useCallback\"])(function(p5){var width=window.innerWidth;var height=window.innerHeight/2;p5.resizeCanvas(width,height,false);},[]);Object(react[\"useEffect\"])(function(){esm[\"e\" /* getDestination */]().volume.value=-5;esm[\"e\" /* getDestination */]().connect(analyzer);return function(){esm[\"e\" /* getDestination */]().disconnect(analyzer);};},[analyzer]);var setup=function setup(p5,canvasParentRef){var width=window.innerWidth;var height=window.innerHeight/2;p5.createCanvas(width,height,p5.WEBGL).parent(canvasParentRef);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:'bg-black absolute bottom-0 right-0 left-0 h-50',children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:'z-1 absolute left-0 top-0 pa4 white f5',children:name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(build_default.a,{setup:setup,draw:function draw(p5){return _draw(p5,analyzer);},windowResized:onResize})]});}\n// CONCATENATED MODULE: ./src/MainPage.tsx\n// 3rd party library imports\n// project imports\n/** ------------------------------------------------------------------------ **\n * Instrument and visualizer component\n ** ------------------------------------------------------------------------ */function InstrumentPanel(_ref){var state=_ref.state,dispatch=_ref.dispatch;/**\n   * This React component is the top-level for the instrument.\n   */var instrument=state.get('instrument');return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:instrument&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Instruments_InstrumentContainer,{state:state,dispatch:dispatch,instrument:instrument})});}function VisualizerPanel(_ref2){var state=_ref2.state;/**\n   * This React component is the top-level for the visualizer.\n   */var visualizer=state.get('visualizer');return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:visualizer&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(VisualizerContainer,{visualizer:visualizer},visualizer.name)});}function InstrumentAndVisualizer(_ref3){var state=_ref3.state,dispatch=_ref3.dispatch;/**\n   * This React component bundles the instrument panel and visualizer panel together.\n   */return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"absolute right-0 bottom-0 top-0 flex flex-column\",style:{left:'16rem'},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InstrumentPanel,{state:state,dispatch:dispatch}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(VisualizerPanel,{state:state,dispatch:dispatch})]});}function ShowWelcome(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center\",style:{left:'16rem'},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"mw6 lh-copy mb4\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(bucket_16[\"b\" /* Music32 */],{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"f3 fw7 mb2\",children:\"Welcome to the case study.\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"f4 mb3\",children:\"Select an instrument and a visualizer on the left to serve some fresh beats.\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"f5\",children:\"The UI is yours to design. Express yourself.\"})]})});}/** ------------------------------------------------------------------------ **\n * Main page component\n ** ------------------------------------------------------------------------ */function MainPage(_ref4){var state=_ref4.state,dispatch=_ref4.dispatch;/**\n   * This React component bundles together the entire main page.\n   */var location=Object(react_router[\"f\" /* useLocation */])();var isWelcome=!state.get('instrument');console.log('INSTRUMENT',isWelcome);Object(react[\"useEffect\"])(function(){dispatch(new Reducer_DispatchAction('SET_LOCATION',{location:location}));},[dispatch,location]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"fixed top-0 left-0 h-100 w-100 bg-white\",onClick:function onClick(){return esm[\"f\" /* start */]();},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SideNav,{state:state,dispatch:dispatch}),isWelcome?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ShowWelcome,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InstrumentAndVisualizer,{state:state,dispatch:dispatch})]});}\n// CONCATENATED MODULE: ./src/instruments/Piano.tsx\n// 3rd party library imports\n// project imports\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */function PianoKey(_ref){var note=_ref.note,synth=_ref.synth,minor=_ref.minor,index=_ref.index;/**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */return/*#__PURE__*/ (// Observations:\n// 1. The JSX refers to the HTML-looking syntax within TypeScript.\n// 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n// 3. The curly braces `{` and `}` should remind you of string interpolation.\nObject(jsx_runtime[\"jsx\"])(\"div\",{onMouseDown:function onMouseDown(){return synth===null||synth===void 0?void 0:synth.triggerAttack(\"\".concat(note));}// Question: what is `onMouseDown`?\n,onMouseUp:function onMouseUp(){return synth===null||synth===void 0?void 0:synth.triggerRelease('+0.25');}// Question: what is `onMouseUp`?\n,className:classnames_default()('ba pointer absolute dim',{'bg-black black h3':minor,// minor keys are black\n'black bg-white h4':!minor// major keys are white\n}),style:{// CSS\ntop:0,left:\"\".concat(index*2,\"rem\"),zIndex:minor?1:0,width:minor?'1.5rem':'2rem',marginLeft:minor?'0.25rem':0}}));}// eslint-disable-next-line\nfunction PianoKeyWithoutJSX(_ref2){var note=_ref2.note,synth=_ref2.synth,minor=_ref2.minor,index=_ref2.index;/**\n   * This React component for pedagogical purposes.\n   * See `PianoKey` for the React component with JSX (JavaScript XML).\n   */return/*#__PURE__*/react_default.a.createElement('div',{onMouseDown:function onMouseDown(){return synth===null||synth===void 0?void 0:synth.triggerAttack(\"\".concat(note));},onMouseUp:function onMouseUp(){return synth===null||synth===void 0?void 0:synth.triggerRelease('+0.25');},className:classnames_default()('ba pointer absolute dim',{'bg-black black h3':minor,'black bg-white h4':!minor}),style:{top:0,left:\"\".concat(index*2,\"rem\"),zIndex:minor?1:0,width:minor?'1.5rem':'2rem',marginLeft:minor?'0.25rem':0}},[]);}function PianoType(_ref3){var title=_ref3.title,onClick=_ref3.onClick,active=_ref3.active;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{onClick:onClick,className:classnames_default()('dim pointer ph2 pv1 ba mr2 br1 fw7 bw1',{'b--black black':active,'gray b--light-gray':!active}),children:title});}function Piano(_ref4){var synth=_ref4.synth,setSynth=_ref4.setSynth;var keys=Object(immutable_es[\"a\" /* List */])([{note:'C',idx:0},{note:'Db',idx:0.5},{note:'D',idx:1},{note:'Eb',idx:1.5},{note:'E',idx:2},{note:'F',idx:3},{note:'Gb',idx:3.5},{note:'G',idx:4},{note:'Ab',idx:4.5},{note:'A',idx:5},{note:'Bb',idx:5.5},{note:'B',idx:6}]);var setOscillator=function setOscillator(newType){setSynth(function(oldSynth){oldSynth.disconnect();return new esm[\"c\" /* Synth */]({oscillator:{type:newType}}).toDestination();});};var oscillators=Object(immutable_es[\"a\" /* List */])(['sine','sawtooth','square','triangle','fmsine','fmsawtooth','fmtriangle','amsine','amsawtooth','amtriangle']);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"pv4\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(immutable_es[\"c\" /* Range */])(2,7).map(function(octave){return keys.map(function(key){var isMinor=key.note.indexOf('b')!==-1;var note=\"\".concat(key.note).concat(octave);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PianoKey,{//react key\nnote:note,synth:synth,minor:isMinor,octave:octave,index:(octave-2)*7+key.idx},note);});})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:'pl4 pt4 flex',children:oscillators.map(function(o){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PianoType,{title:o,onClick:function onClick(){return setOscillator(o);},active:(synth===null||synth===void 0?void 0:synth.oscillator.type)===o},o);})})]});}var PianoInstrument=new Instruments_Instrument('Piano',Piano);\n// CONCATENATED MODULE: ./src/visualizers/Waveform.tsx\n// 3rd party library imports\n// project imports\nvar WaveformVisualizer=new Visualizers_Visualizer('Waveform',function(p5,analyzer){var width=window.innerWidth;var height=window.innerHeight/2;var dim=Math.min(width,height);p5.background(0,0,0,255);p5.strokeWeight(dim*0.01);p5.stroke(255,255,255,255);p5.noFill();var values=analyzer.getValue();p5.beginShape();for(var i=0;i<values.length;i++){var amplitude=values[i];var x=p5.map(i-values.length/2,0,values.length-1,0,width);var y=height/16+amplitude*height;// Place vertex\np5.vertex(x,y);}p5.endShape();});\n// CONCATENATED MODULE: ./src/visualizers/developer-soni.tsx\n// 3rd party library imports\n// project imports\nvar RGBCirclesVisualizer=new Visualizers_Visualizer('RGBCircles (developer-soni)',function(p5,analyzer){var width=150;var height=150;var strokeColors=['#fff700','#4000ff','#00ff08','#ff0000'];var color=strokeColors[Math.floor(Math.random()*(strokeColors.length+1))];p5.background('#383737');p5.stroke(String(color));var values=analyzer.getValue();p5.beginShape();for(var i=0;i<Math.min(values.length,255);i++){var amplitude=values[i];var x=p5.map(i,0,values.length-1,0,width/2);// const y = height / 2 + amplitude * height;\nvar y=p5.map(i,0,values.length-1,0,height/2);var xAngle=p5.map(i,0,x,-4*Math.PI,4*Math.PI);var yAngle=p5.map(i,0,y,-4*Math.PI,4*Math.PI);var angle=xAngle*(x/width)+yAngle*(y/height);for(var j=0;j<10;j++){var myX=width*-4-width/2*p5.cos(2*Math.PI*amplitude+angle);var myY=height*-0.5-height/2*p5.sin(2*Math.PI*-1*amplitude+angle);p5.circle(myX+j*115,myY,5);// draw particle\np5.circle(myX+j*115,myY+1*150,5);// draw particle\n}}p5.endShape();});\n// CONCATENATED MODULE: ./src/visualizers/adam-bel.tsx\n// 3rd party library imports\n// project imports\nfunction Dub(p5,analyzer){var width=window.innerWidth;var height=window.innerHeight/2;var dim=Math.min(width,height);var colors=['blue','white','yellow','red'];p5.background('black');p5.strokeWeight(dim*0.01);var values=analyzer.getValue();p5.beginShape();for(var j=0;j<colors.length;j++){p5.translate(-170*j,17);p5.rotateX(p5.frameCount*0.01*j);p5.rotateY(p5.frameCount*0.03*j);p5.stroke(colors[j]);p5.fill(colors[j]);for(var i=0;i<values.length;i++){var amplitude=values[i];p5.box(amplitude*100*(j+1),amplitude*100*(j+1),amplitude*100*(j+1));}}p5.endShape();}var DubVisualizer=new Visualizers_Visualizer('Dub (adam-bel)',Dub);\n// CONCATENATED MODULE: ./src/img/flute.png\n/* harmony default export */ var flute = (__webpack_require__.p + \"static/media/flute.dc30191d.png\");\n// CONCATENATED MODULE: ./src/instruments/developer-soni.tsx\n// 3rd party library imports\n// project imports\n/** ------------------------------------------------------------------------ **\r\n * Contains implementation of components for Flute.\r\n ** ------------------------------------------------------------------------ */function FluteKey(_ref){var note=_ref.note,synth=_ref.synth,minor=_ref.minor,index=_ref.index;/**\r\n     * This React component corresponds to either a major or minor key in the Flute.\r\n     */return/*#__PURE__*/ (// Observations:\n// 1. The JSX refers to the HTML-looking syntax within TypeScript.\n// 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n// 3. The curly braces `{` and `}` should remind you of string interpolation.\nObject(jsx_runtime[\"jsx\"])(\"div\",{onMouseDown:function onMouseDown(){return synth===null||synth===void 0?void 0:synth.triggerAttack(\"\".concat(note));}// Question: what is `onMouseDown`?\n,onMouseUp:function onMouseUp(){return synth===null||synth===void 0?void 0:synth.triggerRelease('+0.25');}// Question: what is `onMouseUp`?\n,className:classnames_default()('ba pointer absolute dim',{'bg-black black h3':minor,// minor keys are black\n'black bg-white h4':!minor// major keys are white\n}),style:{// CSS\ntop:0,left:\"\".concat(index*2,\"rem\"),zIndex:minor?1:0,width:minor?'1.5rem':'2rem',marginLeft:minor?'0.25rem':0}}));}function Flute(_ref2){var synth=_ref2.synth,setSynth=_ref2.setSynth;var keys=Object(immutable_es[\"a\" /* List */])([{note:'C',idx:0},{note:'Db',idx:0.5},{note:'D',idx:1},{note:'Eb',idx:1.5},{note:'E',idx:2},{note:'F',idx:3},{note:'Gb',idx:3.5},{note:'G',idx:4},{note:'Ab',idx:4.5},{note:'A',idx:5},{note:'Bb',idx:5.5},{note:'B',idx:6}]);// Tone created with : https://tonejs.github.io/examples/simpleSynth\nvar setOscillator=function setOscillator(){setSynth(function(oldSynth){oldSynth.disconnect();return new esm[\"c\" /* Synth */]({\"volume\":7,\"detune\":0,\"portamento\":0,\"envelope\":{\"attack\":1,\"attackCurve\":\"cosine\",\"decay\":2,\"decayCurve\":\"linear\",\"release\":1,\"releaseCurve\":\"exponential\",\"sustain\":0},\"oscillator\":{\"partialCount\":3,\"partials\":[0.000048225308641975394,0.007236810378086416,1],\"phase\":3,\"type\":\"fatcustom\",\"count\":5,\"spread\":1}}).toDestination();});};Object(react[\"useEffect\"])(setOscillator,[setSynth]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"pv4\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"image\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:flute,alt:\"Flute\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(immutable_es[\"c\" /* Range */])(2,7).map(function(octave){return keys.map(function(key){var isMinor=key.note.indexOf('b')!==-1;var note=\"\".concat(key.note).concat(octave);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FluteKey,{//react key\nnote:note,synth:synth,minor:isMinor,octave:octave,index:(octave-2)*7+key.idx},note);});})})]});}var FluteInstrument=new Instruments_Instrument('Flute (developer-soni)',Flute);\n// CONCATENATED MODULE: ./src/img/violin.jpg\n/* harmony default export */ var violin = (__webpack_require__.p + \"static/media/violin.35c8fedd.jpg\");\n// CONCATENATED MODULE: ./src/instruments/adam-bel.tsx\n// 3rd party library imports\n// project imports\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Violin.\n ** ------------------------------------------------------------------------ */function ViolinKey(_ref){var note=_ref.note,synth=_ref.synth,minor=_ref.minor,index=_ref.index,topDi=_ref.topDi,leftDi=_ref.leftDi,rota=_ref.rota;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{transform:rota},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{onMouseDown:function onMouseDown(){return synth===null||synth===void 0?void 0:synth.triggerAttack(\"\".concat(note));},onMouseUp:function onMouseUp(){return synth===null||synth===void 0?void 0:synth.triggerRelease('+0.1');},className:classnames_default()('ba pointer absolute dim'),style:{top:topDi,transform:\"rotate(0deg)\",left:\"\".concat(leftDi,\"rem\"),zIndex:0,marginLeft:minor?'0.25rem':0,background:\"#C8C9C5\",height:'10px',width:\"20px\",borderRadius:\"6px\"}})});}function Violin(_ref2){var synth=_ref2.synth,setSynth=_ref2.setSynth;var keys=Object(immutable_es[\"a\" /* List */])([{note:'C',idx:0},{note:'Db',idx:0.5},{note:'D',idx:1},{note:'Eb',idx:1.5},{note:'E',idx:2},{note:'F',idx:3},{note:'Gb',idx:3.5},{note:'G',idx:4},{note:'Ab',idx:4.5},{note:'A',idx:5},{note:'Bb',idx:5.5},{note:'B',idx:6}]);var setOscillator=function setOscillator(){setSynth(function(oldSynth){oldSynth.disconnect();return new esm[\"c\" /* Synth */]({\"volume\":5,\"detune\":0,\"portamento\":0,\"envelope\":{\"attack\":2,\"attackCurve\":\"cosine\",\"decay\":0.1,\"decayCurve\":\"linear\",\"release\":0.2,\"releaseCurve\":\"cosine\",\"sustain\":0.2},\"oscillator\":{\"partialCount\":5,\"partials\":[1,0.8434636622299384,0.000244140625,0.31640625,0.0625],\"phase\":8,\"type\":\"custom\"}}).toDestination();});};Object(react[\"useEffect\"])(setOscillator,[setSynth]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"pv4\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"image\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:violin,alt:\"Violin\",style:{position:'absolute',top:window.innerHeight/16,left:window.innerWidth/8}})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(immutable_es[\"c\" /* Range */])(3,4).map(function(octave){return keys.map(function(key){var isMinor=key.note.indexOf('b')!==-1;var note=\"\".concat(key.note).concat(octave+1);if(isMinor){return null;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ViolinKey,{//react key\nnote:note,synth:synth,minor:isMinor,octave:octave+1,index:(octave-2)*7+key.idx,topDi:125,leftDi:((octave-2)*7+key.idx)*2+20,rota:\"rotate(1.5deg)\"},note);});})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(immutable_es[\"c\" /* Range */])(4,5).map(function(octave){return keys.map(function(key){var isMinor=key.note.indexOf('b')!==-1;var note=\"\".concat(key.note).concat(octave+1);if(isMinor){return null;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ViolinKey,{//react key\nnote:note,synth:synth,minor:isMinor,octave:octave+1,index:(octave-2)*7+key.idx,topDi:3,leftDi:((octave-2)*7+key.idx)*2+3,rota:\"rotate(0deg)\"},note);});})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(immutable_es[\"c\" /* Range */])(5,6).map(function(octave){return keys.map(function(key){var isMinor=key.note.indexOf('b')!==-1;var note=\"\".concat(key.note).concat(octave+1);if(isMinor){return null;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ViolinKey,{//react key\nnote:note,synth:synth,minor:isMinor,octave:octave+1,index:(octave-2)*7+key.idx,topDi:-120,leftDi:((octave-2)*7+key.idx)*2-11,rota:\"rotate(0deg)\"},note);});})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Object(immutable_es[\"c\" /* Range */])(6,7).map(function(octave){return keys.map(function(key){var isMinor=key.note.indexOf('b')!==-1;var note=\"\".concat(key.note).concat(octave+1);if(isMinor){return null;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ViolinKey,{//react key\nnote:note,synth:synth,minor:isMinor,octave:octave+1,index:(octave-2)*7+key.idx,topDi:-240,leftDi:((octave-2)*7+key.idx)*2-22,rota:\"rotate(-1.5deg)\"},note);});})})]});}var ViolinInstrument=new Instruments_Instrument('Violin (adam-bel)',Violin);\n// CONCATENATED MODULE: ./src/State.tsx\n// 3rd party\n// project dependencies\n/** ------------------------------------------------------------------------ **\n * The entire application state is stored in AppState.\n ** ------------------------------------------------------------------------ */ /**\n * Observation: pure map (compare and contrast with impure map)\n *\n * 'instrument': Instrument\n * 'visualizer': Visualizer\n * 5, 'O mio babbino caro', 'B4 C5 D4 B4 C5 D4 G4 A4 B4 B4 C5 D4 C4 C4 B4 B4', 'Puccini', 'Classic', 'The Most Relaxiing Feel'\n */var State_instruments=Object(immutable_es[\"a\" /* List */])([PianoInstrument,FluteInstrument,ViolinInstrument]);var State_visualizers=Object(immutable_es[\"a\" /* List */])([WaveformVisualizer,RGBCirclesVisualizer,DubVisualizer]);//var songs = List([{'id': '2', 'songTitle': 'New Age Track', 'notes': 'B4 B4 D4 B4 B4 D4 G4 A4 B4 B4 D4 C4 C4 C4 B4 B4', 'artist': 'The Reacts', 'genre': 'DubStep', 'album': 'FrontEnd Rocks'}, {'id': '1', 'songTitle': 'Ode to Joy (Dubstep Remix)', 'notes': 'E4 E4 F4 G4 G4 F4 E4 D4 C4 C4 D4 E4 E4 D4 D4'}, {'id': '3', 'songTitle': 'Allegro', 'notes': 'C3 D6 D4 B4 D6 C3 G4 A4 C3 D6 D4 C4 D6 C4 B4 B4', 'artist': 'Mozart', 'genre': 'Classic', 'album': 'Eine kleine Nachtmusik'}, {'id': '4', 'songTitle': 'Fur Elise', 'notes': 'C7 D7 A4 B4 C7 D7 A4 B4 C7 D7 A4 B4 C7 D7 A4 B4', 'artist': 'Beeethoven', 'genre': 'Classic', 'album': 'Fur Elise'}, {'id': '5', 'songTitle': 'O mio babbino caro', 'notes': 'B4 C5 D4 B4 C5 D4 G4 A4 B4 B4 C5 D4 C4 C4 B4 B4', 'artist': 'Puccini', 'genre': 'Classic', 'album': 'The Most Relaxiing Feel'}])\nvar defaultState=Object(immutable_es[\"b\" /* Map */])({instruments:State_instruments,visualizers:State_visualizers//songs\n});\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\nvar objectWithoutProperties = __webpack_require__(21);\n\n// EXTERNAL MODULE: ./node_modules/socket.io-client/build/index.js\nvar socket_io_client_build = __webpack_require__(61);\n\n// CONCATENATED MODULE: ./src/Socket.tsx\nvar _excluded=[\"error\"];var SOCKET_URL='ws://localhost:3001';var SOCKET_OPTS={transports:['websocket'],path:'/ws',autoConnect:true,reconnection:true,timeout:10000};var idCounter=1;function send(_x,_x2,_x3){return _send.apply(this,arguments);}function _send(){_send=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(socket,name,msg){var _id;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_id=idCounter++;return _context.abrupt(\"return\",new Promise(function(resolve,reject){socket.once(\"\".concat(name,\".\").concat(_id),function(resp){var error=resp.error,success=Object(objectWithoutProperties[\"a\" /* default */])(resp,_excluded);if(success){resolve(success);}else{reject(error);}});socket.emit(name,Object(objectSpread2[\"a\" /* default */])({_id:_id},msg));}));case 2:case\"end\":return _context.stop();}}},_callee);}));return _send.apply(this,arguments);}function initializeSocket(onConnect,onDisconnect){var socket=Object(socket_io_client_build[\"io\"])(SOCKET_URL,SOCKET_OPTS);socket.on('connect',function(){return onConnect(socket);});socket.on('disconnect',onDisconnect);return socket;}\n// EXTERNAL MODULE: ./node_modules/animate.css/animate.css\nvar animate = __webpack_require__(114);\n\n// CONCATENATED MODULE: ./src/App.tsx\n// 3rd party library imports\n// project imports\n// css imports\n/** ------------------------------------------------------------------------ **\n * App component\n ** ------------------------------------------------------------------------ */function App(){var _useReducer=Object(react[\"useReducer\"])(appReducer,defaultState),_useReducer2=Object(slicedToArray[\"a\" /* default */])(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];Object(react[\"useEffect\"])(function(){initializeSocket(/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(socket){var _yield$send,songs;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(new Reducer_DispatchAction('SET_SOCKET',{socket:socket}));_context.next=3;return send(socket,'get_songs',{});case 3:_yield$send=_context.sent;songs=_yield$send.songs;dispatch(new Reducer_DispatchAction('SET_SONGS',{songs:songs}));case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),function(){dispatch(new Reducer_DispatchAction('DELETE_SOCKET'));});},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"c\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MainPage,{state:state,dispatch:dispatch})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/:instrument\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MainPage,{state:state,dispatch:dispatch})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"*\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:\"404\"})})]})});}/* harmony default export */ var src_App = (App);\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(115);\n\n// EXTERNAL MODULE: ./src/tachyons.css\nvar tachyons = __webpack_require__(116);\n\n// CONCATENATED MODULE: ./src/index.tsx\n// 3rd party library imports\n// project imports\n// CSS\n/** ------------------------------------------------------------------------ **\n * Entry point.\n ** ------------------------------------------------------------------------ */function onReactLoaded(){console.log('React has loaded.');}var rootEl=document.getElementById('root');react_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),rootEl,// Insert into DOM here\nonReactLoaded);\n\n/***/ })\n\n},[[117,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/node_modules/postcss-loader/src/index.js??postcss!/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/index.css","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/node_modules/postcss-loader/src/index.js??postcss!/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/tachyons.css","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/Reducer.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/Instruments.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/SideNav.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/Visualizers.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/MainPage.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/instruments/Piano.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/visualizers/Waveform.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/visualizers/developer-soni.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/visualizers/adam-bel.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/img/flute.png","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/instruments/developer-soni.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/img/violin.jpg","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/instruments/adam-bel.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/State.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/Socket.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/App.tsx","/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/index.tsx"],"names":["DispatchAction","type","args","fromJS","appReducer","state","action","console","debug","newState","oldSocket","get","close","set","delete","songs","song","find","s","log","notes","pathname","getIn","search","instrumentName","substring","visualizerName","URLSearchParams","instruments","visualizers","instrument","i","name","visualizer","v","error","toJS","update","Instrument","component","TopNav","InstrumentContainer","dispatch","InstrumentComponent","useState","Tone","oscillator","toDestination","synth","setSynth","useEffect","eachNote","split","noteObjs","map","note","idx","time","velocity","value","triggerAttackRelease","length","start","cancel","top","Section","title","children","RadioButton","to","text","active","onClick","classNames","fw7","Instruments","activeInstrument","location","useLocation","Visualizers","activeVisualizer","Songs","List","setSongs","songsList","size","handleInputChange","event","inputElement","target","inputValue","filteredSongs","filter","toUpperCase","startsWith","id","SongFilter","props","onChangeHandler","SongDetails","toJSON","songTitle","artist","album","genre","SideNav","Visualizer","draw","VisualizerContainer","analyzer","useMemo","onResize","useCallback","p5","width","window","innerWidth","height","innerHeight","resizeCanvas","volume","connect","disconnect","setup","canvasParentRef","createCanvas","WEBGL","parent","InstrumentPanel","VisualizerPanel","InstrumentAndVisualizer","left","ShowWelcome","MainPage","isWelcome","PianoKey","minor","index","triggerAttack","triggerRelease","zIndex","marginLeft","PianoKeyWithoutJSX","React","createElement","onMouseDown","onMouseUp","className","style","PianoType","Piano","keys","setOscillator","newType","oldSynth","oscillators","Range","octave","key","isMinor","indexOf","o","PianoInstrument","WaveformVisualizer","dim","Math","min","background","strokeWeight","stroke","noFill","values","getValue","beginShape","amplitude","x","y","vertex","endShape","RGBCirclesVisualizer","strokeColors","color","floor","random","String","xAngle","PI","yAngle","angle","j","myX","cos","myY","sin","circle","Dub","colors","translate","rotateX","frameCount","rotateY","fill","box","DubVisualizer","FluteKey","Flute","image","FluteInstrument","ViolinKey","topDi","leftDi","rota","transform","borderRadius","Violin","position","ViolinInstrument","defaultState","Map","SOCKET_URL","SOCKET_OPTS","transports","path","autoConnect","reconnection","timeout","idCounter","send","socket","msg","_id","Promise","resolve","reject","once","resp","success","emit","initializeSocket","onConnect","onDisconnect","newSocket","on","App","useReducer","onReactLoaded","rootEl","document","getElementById","ReactDOM","render"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// 3rd party\nimport {List, Map, fromJS} from 'immutable';\n\n// project deps\nimport {Instrument} from './Instruments';\nimport {Visualizer} from './Visualizers';\nimport {AppState} from './State';\n\n/** ------------------------------------------------------------------------ **\n * All user input is handled by DispatchAction.\n ** ------------------------------------------------------------------------ */\n\n/**\n * Observation: pure map (compare and contrast with impure map)\n *\n * 'instrument': Instrument\n * 'visualizer': Visualizer\n * 'songs': List<string>\n * 'notes': List<{id: number, songTitle: string, notes: string}>\n */\ntype DispatchArgs = {\n    [key: string]: any;\n};\n\n// A simple algebraic data-type with string literal types\ntype DispatchActionType =\n    | 'SET_SOCKET'\n    | 'DELETE_SOCKET'\n    | 'SET_SONGS'\n    | 'PLAY_SONG'\n    | 'STOP_SONG'\n    | 'SET_LOCATION';\n\nexport class DispatchAction {\n    readonly type: DispatchActionType;\n    readonly args: Map<string, any>;\n\n    constructor(type: DispatchActionType, args?: DispatchArgs) {\n        this.type = type;\n        this.args = fromJS(args) as Map<string, any>;\n    }\n}\n\n/** ------------------------------------------------------------------------ **\n * Top-level application reducer.\n ** ------------------------------------------------------------------------ */\n\nexport function appReducer(state: AppState, action: DispatchAction): AppState {\n    const {type, args} = action;\n\n    console.debug(`${type}`);\n\n    // Question: Does this function remind of you registering callbacks?\n    const newState = (() => {\n        switch (type) {\n            case 'SET_SOCKET': {\n                const oldSocket = state.get('socket');\n                if (oldSocket) {\n                    oldSocket.close();\n                }\n\n                return state.set('socket', args.get('socket'));\n            }\n            case 'DELETE_SOCKET': {\n                return state.delete('socket');\n            }\n            case 'SET_SONGS': {\n                const songs = args.get('songs');\n                return state.set('songs', songs);\n            }\n            case 'PLAY_SONG': {\n                const song = state\n                    .get('songs')\n                    .find((s: any) => s.get('id') === args.get('id'))\n                console.log(song);\n                const notes = song\n                    .get('notes');\n                return state.set('notes', notes).set('playingSong', song);\n            }\n            case 'STOP_SONG': {\n                return state.delete('notes');\n            }\n            case 'SET_LOCATION': {\n                const pathname = args.getIn(['location', 'pathname'], '') as string;\n                const search = args.getIn(['location', 'search'], '') as string;\n\n                const instrumentName: string = pathname.substring(1);\n                const visualizerName: string =\n                    new URLSearchParams(search.substring(1)).get('visualizer') ?? '';\n                const instruments: List<Instrument> = state.get('instruments');\n                const visualizers: List<Visualizer> = state.get('visualizers');\n\n                const instrument = instruments.find(i => i.name === instrumentName);\n                const visualizer = visualizers.find(v => v.name === visualizerName);\n\n                return state\n                    .set('instrument', instrument)\n                    .set('visualizer', visualizer);\n            }\n            default:\n                console.error(`type unknown: ${type}\\n`, args.toJS());\n                return state;\n        }\n    })();\n\n    console.debug(newState.update('socket', s => (s ? '[socket]' : s)).toJS());\n\n    return newState;\n}\n","// 3rd party library imports\nimport React, { useState, useEffect } from 'react';\nimport * as Tone from 'tone';\n\n// project imports\nimport { DispatchAction } from './Reducer';\nimport { AppState } from './State';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of an Instruments.\n ** ------------------------------------------------------------------------ */\n\nexport interface InstrumentProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  name: string;\n  synth: Tone.Synth;\n  setSynth: (f: (oldSynth: Tone.Synth) => Tone.Synth) => void;\n}\n\nexport class Instrument {\n  public readonly name: string;\n  public readonly component: React.FC<InstrumentProps>;\n\n  constructor(name: string, component: React.FC<InstrumentProps>) {\n    this.name = name;\n    this.component = component;\n  }\n}\n\nfunction TopNav({ name }: { name: string }) {\n  return (\n    <div\n      className={\n        'w-100 h3 bb b--light-gray flex justify-between items-center ph4'\n      }\n    >\n      <div>{name}</div>\n    </div>\n  );\n}\n\ninterface InstrumentContainerProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  instrument: Instrument;\n}\n\nexport const InstrumentContainer: React.FC<InstrumentContainerProps> = ({\n  instrument,\n  state,\n  dispatch,\n}: InstrumentContainerProps) => {\n  const InstrumentComponent = instrument.component;\n  const [synth, setSynth] = useState(\n    new Tone.Synth({\n      oscillator: { type: 'sine' } as Tone.OmniOscillatorOptions,\n    }).toDestination(),\n  );\n\n  const notes = state.get('notes');\n\n  useEffect(() => {\n    if (notes && synth) {\n      let eachNote = notes.split(' ');\n      let noteObjs = eachNote.map((note: string, idx: number) => ({\n        idx,\n        time: `+${idx / 4}`,\n        note,\n        velocity: 1,\n      }));\n\n      new Tone.Part((time, value) => {\n        // the value is an object which contains both the note and the velocity\n        synth.triggerAttackRelease(value.note, '4n', time, value.velocity);\n        if (value.idx === eachNote.length - 1) {\n          dispatch(new DispatchAction('STOP_SONG'));\n        }\n      }, noteObjs).start(0);\n\n      Tone.Transport.start();\n\n      return () => {\n        Tone.Transport.cancel();\n      };\n    }\n\n    return () => {};\n  }, [notes, synth, dispatch]);\n\n  return (\n    <div>\n      <TopNav name={instrument.name} />\n      <div\n        className={'bg-white absolute right-0 left-0'}\n        style={{ top: '4rem' }}\n      >\n        <InstrumentComponent\n          name={instrument.name}\n          state={state}\n          dispatch={dispatch}\n          synth={synth}\n          setSynth={setSynth}\n        />\n      </div>\n    </div>\n  );\n};\n","// 3rd party library imports\nimport classNames from 'classnames';\nimport {fromJS, List} from 'immutable';\nimport React, {Fragment, useEffect, useState} from 'react';\nimport {Link, useLocation} from 'react-router-dom';\nimport {Music20, RadioButton20, RadioButtonChecked20,} from '@carbon/icons-react';\n\n// project imports\nimport {DispatchAction} from './Reducer';\nimport {AppState} from './State';\nimport {Instrument} from './Instruments';\nimport {Visualizer} from './Visualizers';\n\n/** ------------------------------------------------------------------------ **\n * All the components in the side navigation.\n ** ------------------------------------------------------------------------ */\n\ninterface SideNavProps {\n    state: AppState;\n    dispatch: React.Dispatch<DispatchAction>;\n}\n\nconst Section: React.FC<{ title: string }> = ({title, children}) => {\n    return (\n        <div className=\"flex flex-column bb b--light-gray pa3 customHeight\">\n            <div className=\"fw7 mb2\">{title} </div>\n            <div className=\"flex-auto overflow-scroll\">{children}</div>\n        </div>\n    );\n};\n\ninterface RadioButtonProps {\n    to: any,\n    text: string,\n    active: boolean,\n    onClick: () => void\n}\n\nfunction RadioButton({to, text, active, onClick}: RadioButtonProps): JSX.Element {\n    return (\n        <Link to={to} className=\"no-underline\">\n            <div\n                className={classNames('f6 flex items-center black', {fw7: active})}\n                onClick={onClick}\n            >\n                {active ? (\n                    <RadioButtonChecked20 className=\"mr1\"/>\n                ) : (\n                    <RadioButton20 className=\"mr1\"/>\n                )}\n                <div className=\"dim\">{text}</div>\n            </div>\n        </Link>\n    );\n}\n\nfunction Instruments({state}: SideNavProps): JSX.Element {\n    const instruments: List<Instrument> = state.get('instruments');\n    const activeInstrument = state.get('instrument')?.name;\n    const location = useLocation();\n\n    return (\n        <Section title=\"Instruments\">\n            {instruments.map(i => (\n                <RadioButton\n                    key={i.name}\n                    to={`/${i.name}${location.search}`}\n                    text={i.name}\n                    active={i.name === activeInstrument}\n                    onClick={() => console.log(i.name)}\n                />\n            ))}\n        </Section>\n    );\n}\n\nfunction Visualizers({state}: SideNavProps): JSX.Element {\n    const visualizers: List<Visualizer> = state.get('visualizers');\n    const activeVisualizer = state.get('visualizer')?.name;\n    const location = useLocation();\n\n    return (\n        <Section title=\"Visualizers\">\n            {visualizers.map(v => (\n                <RadioButton\n                    key={v.name}\n                    to={{\n                        pathname: location.pathname,\n                        search: `?visualizer=${v.name}`,\n                    }}\n                    text={v.name}\n                    active={v.name === activeVisualizer}\n                    onClick={() => console.log(v.name)}\n                />\n            ))}\n        </Section>\n    );\n}\n\nfunction Songs({state, dispatch}: SideNavProps): JSX.Element {\n    const [songs, setSongs] = useState(List<any>()); // Songs are stored in the component state\n\n    useEffect(() => {\n        const songsList: List<any> = state.get('songs', List());\n        if (songsList.size > 0) {\n            setSongs(songsList); // Adds the songs from the application state\n        }\n    }, [state]);\n\n    // This method is used within the filter component\n    const handleInputChange = (event: Event) => {\n        const inputElement = event.target as HTMLInputElement\n        const inputValue = inputElement.value ?? \"\";\n        const filteredSongs = inputValue ? songs.filter((song) => {\n            return song.get('songTitle').toUpperCase().startsWith(inputValue.toUpperCase());\n        }) : state.get('songs', List());\n        if (filteredSongs) {\n            setSongs(filteredSongs); // Filtered songs are set to this components state\n        }\n    }\n\n    return (\n        <Fragment>\n            <SongFilter onChangeHandler={handleInputChange}/>\n            <Section title=\"Playlist\">\n                {songs.map(song => (\n                    <div\n                        key={song.get('id')}\n                        className=\"f6 pointer underline flex items-center no-underline i dim\"\n                        onClick={() =>\n                            dispatch(new DispatchAction('PLAY_SONG', {id: song.get('id')}))\n                        }\n                    >\n                        <Music20 className=\"mr1\"/>\n                        {song.get('songTitle')}\n                    </div>\n                ))}\n            </Section>\n        </Fragment>\n    );\n}\n\n/*\n* This component displays song filter\n* */\nfunction SongFilter(props: any): JSX.Element {\n    const onChangeHandler = props.onChangeHandler;\n    return (\n        <div className=\"pa2 b--light-gray mb1 mr3\">\n            <h4 className=\"fw7 mb2\">Search songs</h4>\n            <input type=\"text\" maxLength={50} onChange={onChangeHandler}/>\n        </div>\n    )\n}\n\n/*\n* This component displays details of the currently playing song\n* */\nfunction SongDetails({state}: SideNavProps): JSX.Element {\n    let song = state.get('playingSong', fromJS({})).toJSON();\n    return (\n        <Fragment>\n            {song.songTitle && <div className=\"songDetails overflow-scroll\">\n                <h3 className=\"fw7 mb2\">{song.songTitle}</h3>\n                <div className=\"songDetails__element\">\n                    <span><b>Artist :</b></span>\n                    <span className=\"songDetails__element-detail\">{song.artist ?? 'Not Available'}</span>\n                </div>\n                <div className=\"songDetails__element\">\n                    <span><b>Album : </b></span>\n                    <span className=\"songDetails__element-detail\">{song.album ?? 'Not Available'}</span>\n                </div>\n                <div className=\"songDetails__element\">\n                    <span><b>Genre : </b></span>\n                    <span className=\"songDetails__element-detail\">{song.genre ?? 'Not Available'}</span>\n                </div>\n            </div>}\n        </Fragment>\n\n    );\n}\n\nexport function SideNav({state, dispatch}: SideNavProps): JSX.Element {\n\n    return (\n        <div className=\"absolute top-0 left-0 bottom-0 w5 z-1 shadow-1 bg-white flex flex-column\">\n            <div className=\"h3 fw7 f5 flex items-center pl3 bb b--light-gray\">\n                Temp Instrument\n            </div>\n            <div className=\"flex-auto\">\n                <Instruments state={state} dispatch={dispatch}/>\n                <Visualizers state={state} dispatch={dispatch}/>\n                <Songs state={state} dispatch={dispatch}/>\n                <SongDetails state={state} dispatch={dispatch}/> {/* This renders the song details component */}\n            </div>\n        </div>\n    );\n}\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport Sketch from 'react-p5';\nimport P5 from 'p5';\nimport React, { useEffect, useMemo, useCallback } from 'react';\n\ntype VisualizerDrawer = (p5: P5, analyzer: Tone.Analyser) => void;\n\ninterface VisualizerContainerProps {\n  visualizer: Visualizer;\n}\n\nexport class Visualizer {\n  public readonly name: string;\n  public readonly draw: VisualizerDrawer;\n\n  constructor(name: string, draw: VisualizerDrawer) {\n    this.name = name;\n    this.draw = draw;\n  }\n}\n\nexport function VisualizerContainer({ visualizer }: VisualizerContainerProps) {\n  const { name, draw } = visualizer;\n\n  const analyzer: Tone.Analyser = useMemo(\n    () => new Tone.Analyser('waveform', 256),\n    [],\n  );\n\n  const onResize = useCallback((p5: P5) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n\n    p5.resizeCanvas(width, height, false);\n  }, []);\n\n  useEffect(() => {\n    Tone.getDestination().volume.value = -5;\n    Tone.getDestination().connect(analyzer);\n    return () => {\n      Tone.getDestination().disconnect(analyzer);\n    };\n  }, [analyzer]);\n\n  const setup = (p5: P5, canvasParentRef: Element) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    p5.createCanvas(width, height, p5.WEBGL).parent(canvasParentRef);\n  };\n\n  return (\n    <div className={'bg-black absolute bottom-0 right-0 left-0 h-50'}>\n      <div className={'z-1 absolute left-0 top-0 pa4 white f5'}>{name}</div>\n      <Sketch\n        setup={setup}\n        draw={p5 => draw(p5, analyzer)}\n        windowResized={onResize}\n      />\n    </div>\n  );\n}\n","// 3rd party library imports\nimport React, { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport * as Tone from 'tone';\nimport { Music32 } from '@carbon/icons-react';\n\n// project imports\nimport { InstrumentContainer } from './Instruments';\nimport { AppState } from './State';\nimport { DispatchAction } from './Reducer';\nimport { SideNav } from './SideNav';\nimport { VisualizerContainer } from './Visualizers';\n\ntype PanelProps = {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n};\n\n/** ------------------------------------------------------------------------ **\n * Instrument and visualizer component\n ** ------------------------------------------------------------------------ */\n\nfunction InstrumentPanel({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the instrument.\n   */\n  const instrument = state.get('instrument');\n\n  return (\n    <div>\n      {instrument && (\n        <InstrumentContainer\n          state={state}\n          dispatch={dispatch}\n          instrument={instrument}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction VisualizerPanel({ state }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the visualizer.\n   */\n  const visualizer = state.get('visualizer');\n\n  return (\n    <div>\n      {visualizer && (\n        <VisualizerContainer key={visualizer.name} visualizer={visualizer} />\n      )}\n    </div>\n  );\n}\n\nfunction InstrumentAndVisualizer({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles the instrument panel and visualizer panel together.\n   */\n\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column\"\n      style={{ left: '16rem' }}\n    >\n      <InstrumentPanel state={state} dispatch={dispatch} />\n      <VisualizerPanel state={state} dispatch={dispatch} />\n    </div>\n  );\n}\n\nfunction ShowWelcome(): JSX.Element {\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center\"\n      style={{ left: '16rem' }}\n    >\n      <div className=\"mw6 lh-copy mb4\">\n        <Music32 />\n        <div className=\"f3 fw7 mb2\">Welcome to the case study.</div>\n        <div className=\"f4 mb3\">\n          Select an instrument and a visualizer on the left to serve some fresh\n          beats.\n        </div>\n        <div className=\"f5\">The UI is yours to design. Express yourself.</div>\n      </div>\n    </div>\n  );\n}\n\n/** ------------------------------------------------------------------------ **\n * Main page component\n ** ------------------------------------------------------------------------ */\n\nexport function MainPage({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles together the entire main page.\n   */\n\n  const location = useLocation();\n  const isWelcome = !state.get('instrument');\n  console.log('INSTRUMENT', isWelcome);\n\n  useEffect(() => {\n    dispatch(new DispatchAction('SET_LOCATION', { location }));\n  }, [dispatch, location]);\n\n  return (\n    <div\n      className=\"fixed top-0 left-0 h-100 w-100 bg-white\"\n      onClick={() => Tone.start()}\n    >\n      <SideNav state={state} dispatch={dispatch} />\n      {isWelcome ? (\n        <ShowWelcome />\n      ) : (\n        <InstrumentAndVisualizer state={state} dispatch={dispatch} />\n      )}\n    </div>\n  );\n}\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport { List, Range } from 'immutable';\nimport React from 'react';\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */\n\ninterface PianoKeyProps {\n  note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\n  duration?: string;\n  synth?: Tone.Synth; // Contains library code for making sound\n  minor?: boolean; // True if minor key, false if major key\n  octave: number;\n  index: number; // octave + index together give a location for the piano key\n}\n\nexport function PianoKey({\n  note,\n  synth,\n  minor,\n  index,\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */\n  return (\n    // Observations:\n    // 1. The JSX refers to the HTML-looking syntax within TypeScript.\n    // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n    // 3. The curly braces `{` and `}` should remind you of string interpolation.\n    <div\n      onMouseDown={() => synth?.triggerAttack(`${note}`)} // Question: what is `onMouseDown`?\n      onMouseUp={() => synth?.triggerRelease('+0.25')} // Question: what is `onMouseUp`?\n      className={classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor, // minor keys are black\n        'black bg-white h4': !minor, // major keys are white\n      })}\n      style={{\n        // CSS\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      }}\n    ></div>\n  );\n}\n\n// eslint-disable-next-line\nfunction PianoKeyWithoutJSX({\n  note,\n  synth,\n  minor,\n  index,\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component for pedagogical purposes.\n   * See `PianoKey` for the React component with JSX (JavaScript XML).\n   */\n  return React.createElement(\n    'div',\n    {\n      onMouseDown: () => synth?.triggerAttack(`${note}`),\n      onMouseUp: () => synth?.triggerRelease('+0.25'),\n      className: classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor,\n        'black bg-white h4': !minor,\n      }),\n      style: {\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      },\n    },\n    [],\n  );\n}\n\nfunction PianoType({ title, onClick, active }: any): JSX.Element {\n  return (\n    <div\n      onClick={onClick}\n      className={classNames('dim pointer ph2 pv1 ba mr2 br1 fw7 bw1', {\n        'b--black black': active,\n        'gray b--light-gray': !active,\n      })}\n    >\n      {title}\n    </div>\n  );\n}\n\nfunction Piano({ synth, setSynth }: InstrumentProps): JSX.Element {\n  const keys = List([\n    { note: 'C', idx: 0 },\n    { note: 'Db', idx: 0.5 },\n    { note: 'D', idx: 1 },\n    { note: 'Eb', idx: 1.5 },\n    { note: 'E', idx: 2 },\n    { note: 'F', idx: 3 },\n    { note: 'Gb', idx: 3.5 },\n    { note: 'G', idx: 4 },\n    { note: 'Ab', idx: 4.5 },\n    { note: 'A', idx: 5 },\n    { note: 'Bb', idx: 5.5 },\n    { note: 'B', idx: 6 },\n  ]);\n\n  const setOscillator = (newType: Tone.ToneOscillatorType) => {\n    setSynth(oldSynth => {\n      oldSynth.disconnect();\n\n      return new Tone.Synth({\n        oscillator: { type: newType } as Tone.OmniOscillatorOptions,\n      }).toDestination();\n    });\n  };\n\n  const oscillators: List<OscillatorType> = List([\n    'sine',\n    'sawtooth',\n    'square',\n    'triangle',\n    'fmsine',\n    'fmsawtooth',\n    'fmtriangle',\n    'amsine',\n    'amsawtooth',\n    'amtriangle',\n  ]) as List<OscillatorType>;\n\n  return (\n    <div className=\"pv4\">\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(2, 7).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave}`;\n            return (\n              <PianoKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave}\n                index={(octave - 2) * 7 + key.idx}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className={'pl4 pt4 flex'}>\n        {oscillators.map(o => (\n          <PianoType\n            key={o}\n            title={o}\n            onClick={() => setOscillator(o)}\n            active={synth?.oscillator.type === o}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport const PianoInstrument = new Instrument('Piano', Piano);\n","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport { Visualizer } from '../Visualizers';\n\n\nexport const WaveformVisualizer = new Visualizer(\n  'Waveform',\n  (p5: P5, analyzer: Tone.Analyser) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    const dim = Math.min(width, height);\n\n    p5.background(0, 0, 0, 255);\n\n    p5.strokeWeight(dim * 0.01);\n    p5.stroke(255, 255, 255, 255);\n    p5.noFill();\n\n    const values = analyzer.getValue();\n    p5.beginShape();\n    for (let i = 0; i < values.length; i++) {\n      const amplitude = values[i] as number;\n      const x = p5.map(i-(values.length/2), 0, values.length - 1, 0, width);\n      const y = height / 16 + amplitude * height;\n      // Place vertex\n      p5.vertex(x, y);\n    }\n    p5.endShape();\n  },\n);\n","// 3rd party library imports\r\nimport P5 from 'p5';\r\nimport * as Tone from 'tone';\r\n\r\n// project imports\r\nimport {Visualizer} from '../Visualizers';\r\n\r\nexport const RGBCirclesVisualizer = new Visualizer(\r\n    'RGBCircles (developer-soni)',\r\n    (p5: P5, analyzer: Tone.Analyser) => {\r\n        const width = 150;\r\n        const height = 150;\r\n        const strokeColors = ['#fff700', '#4000ff', '#00ff08', '#ff0000']\r\n        const color = strokeColors[Math.floor(Math.random() * (strokeColors.length + 1))];\r\n\r\n        p5.background('#383737');\r\n        p5.stroke(String(color));\r\n        const values = analyzer.getValue();\r\n        p5.beginShape();\r\n\r\n        for (let i = 0; i < Math.min(values.length, 255); i++) {\r\n            const amplitude = values[i] as number;\r\n            const x = p5.map(i, 0, values.length - 1, 0, width / 2);\r\n            // const y = height / 2 + amplitude * height;\r\n            const y = p5.map(i, 0, values.length - 1, 0, height / 2);\r\n            const xAngle = p5.map(i, 0, x, -4 * Math.PI, 4 * Math.PI,);\r\n            const yAngle = p5.map(i, 0, y, -4 * Math.PI, 4 * Math.PI,);\r\n            const angle = xAngle * (x / width) + yAngle * (y / height);\r\n\r\n            for (let j = 0; j < 10; j++) {\r\n                const myX = (width*-4) - width / 2 * p5.cos(2 * Math.PI * amplitude + angle);\r\n                const myY = (height*-0.5) - height / 2 * p5.sin(2 * Math.PI * -1 * amplitude + angle);\r\n                p5.circle(myX + j * 115, myY, 5); // draw particle\r\n                p5.circle(myX + j * 115, myY + 1 * 150, 5); // draw particle\r\n            }\r\n        }\r\n\r\n        p5.endShape();\r\n    },\r\n);","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport {Visualizer} from '../Visualizers';\n\nfunction Dub(p5: P5, analyzer: Tone.Analyser) {\n  const width = window.innerWidth;\n  const height = window.innerHeight / 2;\n  const dim = Math.min(width, height);\n  const colors = ['blue', 'white', 'yellow', 'red']\n\n  p5.background('black');\n\n  p5.strokeWeight(dim * 0.01);\n\n  const values = analyzer.getValue();\n  p5.beginShape();\n\n  for (let j = 0; j < colors.length; j++) {\n    p5.translate(-170*j, 17);\n    p5.rotateX(p5.frameCount*0.01*j);\n    p5.rotateY(p5.frameCount*0.03*j);\n    p5.stroke(colors[j]);\n    p5.fill(colors[j]);\n    for (let i = 0; i < values.length; i++) {\n      const amplitude = values[i] as number;\n      p5.box(amplitude*100*(j+1), amplitude*100*(j+1), amplitude*100*(j+1));\n    }\n  }\n\n  p5.endShape();\n}\n\nexport const DubVisualizer = new Visualizer('Dub (adam-bel)', Dub);","export default __webpack_public_path__ + \"static/media/flute.dc30191d.png\";","// 3rd party library imports\r\nimport * as Tone from 'tone';\r\nimport classNames from 'classnames';\r\nimport { List, Range } from 'immutable';\r\nimport React, { useEffect } from 'react';\r\n\r\n// project imports\r\nimport { Instrument, InstrumentProps } from '../Instruments';\r\nimport { OmniOscillatorOptions } from \"tone/Tone/source/oscillator/OscillatorInterface\";\r\nimport { RecursivePartial } from \"tone/Tone/core/util/Interface\";\r\nimport image from './../img/flute.png';\r\n\r\n/** ------------------------------------------------------------------------ **\r\n * Contains implementation of components for Flute.\r\n ** ------------------------------------------------------------------------ */\r\n\r\ninterface FluteKeyProps {\r\n    note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\r\n    duration?: string;\r\n    synth?: Tone.Synth; // Contains library code for making sound\r\n    minor?: boolean; // True if minor key, false if major key\r\n    octave: number;\r\n    index: number; // octave + index together give a location for the Flute key\r\n}\r\n\r\nexport function FluteKey({\r\n    note,\r\n    synth,\r\n    minor,\r\n    index,\r\n}: FluteKeyProps): JSX.Element {\r\n    /**\r\n     * This React component corresponds to either a major or minor key in the Flute.\r\n     */\r\n    return (\r\n        // Observations:\r\n        // 1. The JSX refers to the HTML-looking syntax within TypeScript.\r\n        // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\r\n        // 3. The curly braces `{` and `}` should remind you of string interpolation.\r\n        <div\r\n            onMouseDown={() => synth?.triggerAttack(`${note}`)} // Question: what is `onMouseDown`?\r\n            onMouseUp={() => synth?.triggerRelease('+0.25')} // Question: what is `onMouseUp`?\r\n            className={classNames('ba pointer absolute dim', {\r\n                'bg-black black h3': minor, // minor keys are black\r\n                'black bg-white h4': !minor, // major keys are white\r\n            })}\r\n            style={{\r\n                // CSS\r\n                top: 0,\r\n                left: `${index * 2}rem`,\r\n                zIndex: minor ? 1 : 0,\r\n                width: minor ? '1.5rem' : '2rem',\r\n                marginLeft: minor ? '0.25rem' : 0,\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nfunction Flute({ synth, setSynth }: InstrumentProps): JSX.Element {\r\n    const keys = List([\r\n        { note: 'C', idx: 0 },\r\n        { note: 'Db', idx: 0.5 },\r\n        { note: 'D', idx: 1 },\r\n        { note: 'Eb', idx: 1.5 },\r\n        { note: 'E', idx: 2 },\r\n        { note: 'F', idx: 3 },\r\n        { note: 'Gb', idx: 3.5 },\r\n        { note: 'G', idx: 4 },\r\n        { note: 'Ab', idx: 4.5 },\r\n        { note: 'A', idx: 5 },\r\n        { note: 'Bb', idx: 5.5 },\r\n        { note: 'B', idx: 6 },\r\n    ]);\r\n\r\n    // Tone created with : https://tonejs.github.io/examples/simpleSynth\r\n    const setOscillator = () => {\r\n        setSynth(oldSynth => {\r\n            oldSynth.disconnect();\r\n            return new Tone.Synth({\r\n                \"volume\": 7,\r\n                \"detune\": 0,\r\n                \"portamento\": 0,\r\n                \"envelope\": {\r\n                    \"attack\": 1,\r\n                    \"attackCurve\": \"cosine\",\r\n                    \"decay\": 2,\r\n                    \"decayCurve\": \"linear\",\r\n                    \"release\": 1,\r\n                    \"releaseCurve\": \"exponential\",\r\n                    \"sustain\": 0\r\n                },\r\n                \"oscillator\": {\r\n                    \"partialCount\": 3,\r\n                    \"partials\": [\r\n                        0.000048225308641975394,\r\n                        0.007236810378086416,\r\n                        1\r\n                    ],\r\n                    \"phase\": 3,\r\n                    \"type\": \"fatcustom\",\r\n                    \"count\": 5,\r\n                    \"spread\": 1\r\n                } as RecursivePartial<OmniOscillatorOptions>,\r\n            }).toDestination();\r\n        }\r\n        )\r\n            ;\r\n    };\r\n\r\n    useEffect(setOscillator, [setSynth]);\r\n\r\n    return (\r\n        <div className=\"pv4\">\r\n            <div className={\"image\"}>\r\n                <img src={image} alt={\"Flute\"} />\r\n            </div>\r\n            <div className=\"relative dib h4 w-100 ml4\">\r\n                {Range(2, 7).map(octave =>\r\n                    keys.map(key => {\r\n                        const isMinor = key.note.indexOf('b') !== -1;\r\n                        const note = `${key.note}${octave}`;\r\n                        return (\r\n                            <FluteKey\r\n                                key={note} //react key\r\n                                note={note}\r\n                                synth={synth}\r\n                                minor={isMinor}\r\n                                octave={octave}\r\n                                index={(octave - 2) * 7 + key.idx}\r\n                            />\r\n                        );\r\n                    }),\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport const FluteInstrument = new Instrument('Flute (developer-soni)', Flute);\r\n","export default __webpack_public_path__ + \"static/media/violin.35c8fedd.jpg\";","// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport {List, Range} from 'immutable';\nimport React, {useEffect} from 'react';\n\n// project imports\nimport {Instrument, InstrumentProps} from '../Instruments';\nimport {RecursivePartial} from \"tone/Tone/core/util/Interface\";\nimport {OmniOscillatorOptions} from \"tone/Tone/source/oscillator/OscillatorInterface\";\nimport image from './../img/violin.jpg';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Violin.\n ** ------------------------------------------------------------------------ */\n\ninterface ViolinKeyProps {\n  note: string; \n  duration?: string;\n  synth?: Tone.Synth; \n  minor?: boolean; \n  octave: number;\n  index: number; \n  topDi: number;\n  leftDi: number; \n  rota: string; \n}\n\nexport function ViolinKey({note, synth, minor, index, topDi, leftDi, rota}: ViolinKeyProps): JSX.Element {\n  return (\n    <div\n      style={{\n        transform: rota\n      }}>\n      <div\n        onMouseDown={() => synth?.triggerAttack(`${note}`)} \n        onMouseUp={() => synth?.triggerRelease('+0.1')}\n        className={classNames('ba pointer absolute dim')}\n        style={{\n          top: topDi,\n          transform: \"rotate(0deg)\",\n          left: `${leftDi}rem`,\n          zIndex: 0,\n          marginLeft: minor ? '0.25rem' : 0,\n          background: \"#C8C9C5\",\n          height: '10px',\n          width: \"20px\",\n          borderRadius: \"6px\"\n        }}>\n      </div>\n    </div>\n  );\n}\n\nfunction Violin({synth, setSynth}: InstrumentProps): JSX.Element {\n  const keys = List([\n    { note: 'C', idx: 0 },\n    { note: 'Db', idx: 0.5 },\n    { note: 'D', idx: 1 },\n    { note: 'Eb', idx: 1.5 },\n    { note: 'E', idx: 2 },\n    { note: 'F', idx: 3 },\n    { note: 'Gb', idx: 3.5 },\n    { note: 'G', idx: 4 },\n    { note: 'Ab', idx: 4.5 },\n    { note: 'A', idx: 5 },\n    { note: 'Bb', idx: 5.5 },\n    { note: 'B', idx: 6 },\n  ]);\n\n  const setOscillator = () => {\n    setSynth(oldSynth => {\n      oldSynth.disconnect();\n      return new Tone.Synth({\n        \"volume\": 5,\n        \"detune\": 0,\n        \"portamento\": 0,\n        \"envelope\": {\n          \"attack\": 2,\n          \"attackCurve\": \"cosine\",\n          \"decay\": 0.1,\n          \"decayCurve\": \"linear\",\n          \"release\": 0.2,\n          \"releaseCurve\": \"cosine\",\n          \"sustain\": 0.2\n        },\n        \"oscillator\": {\n          \"partialCount\": 5,\n          \"partials\": [\n            1,\n            0.8434636622299384,\n            0.000244140625,\n            0.31640625,\n            0.0625\n          ],\n          \"phase\": 8,\n          \"type\": \"custom\"\n        } as RecursivePartial<OmniOscillatorOptions>,\n      }).toDestination();}\n    );\n  };\n\n  useEffect(setOscillator, [setSynth]);\n\n  return (\n    <div className=\"pv4\">\n      <div className={\"image\"}>\n        <img src={image} alt={\"Violin\"} style={{\n          position: 'absolute',\n          top: window.innerHeight/16,\n          left: window.innerWidth/8\n        }}/>\n      </div>\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(3, 4).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave+1}`;\n            if (isMinor) {\n              return null\n            } \n            return (\n              <ViolinKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave+1}\n                index={(octave - 2) * 7 + key.idx}\n                topDi={125}\n                leftDi={(((octave - 2) * 7 + key.idx) * 2)+20}\n                rota={\"rotate(1.5deg)\"}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(4, 5).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave+1}`;\n            if (isMinor) {\n              return null\n            }\n            return (\n              <ViolinKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave+1}\n                index={(octave - 2) * 7 + key.idx}\n                topDi={3}\n                leftDi={(((octave - 2) * 7 + key.idx) * 2)+3}\n                rota={\"rotate(0deg)\"}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(5, 6).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave+1}`;\n            if (isMinor) {\n              return null\n            }\n            return (\n              <ViolinKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave+1}\n                index={(octave - 2) * 7 + key.idx}\n                topDi={-120}\n                leftDi={(((octave - 2) * 7 + key.idx) * 2)-11}\n                rota={\"rotate(0deg)\"}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(6, 7).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave+1}`;\n            if (isMinor) {\n              return null\n            }\n            return (\n              <ViolinKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave+1}\n                index={(octave - 2) * 7 + key.idx}\n                topDi={-240}\n                leftDi={(((octave - 2) * 7 + key.idx) * 2)-22}\n                rota={\"rotate(-1.5deg)\"}\n              />\n            );\n          }),\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport const ViolinInstrument = new Instrument('Violin (adam-bel)', Violin);","// 3rd party\nimport { List, Map } from 'immutable';\n\n// project dependencies\nimport { PianoInstrument } from './instruments/Piano';\nimport { WaveformVisualizer } from './visualizers/Waveform';\nimport { RGBCirclesVisualizer } from \"./visualizers/developer-soni\";\nimport { DubVisualizer } from \"./visualizers/adam-bel\";\nimport { FluteInstrument } from \"./instruments/developer-soni\";\nimport { ViolinInstrument } from \"./instruments/adam-bel\";\n\n/** ------------------------------------------------------------------------ **\n * The entire application state is stored in AppState.\n ** ------------------------------------------------------------------------ */\n\n/**\n * Observation: pure map (compare and contrast with impure map)\n *\n * 'instrument': Instrument\n * 'visualizer': Visualizer\n * 5, 'O mio babbino caro', 'B4 C5 D4 B4 C5 D4 G4 A4 B4 B4 C5 D4 C4 C4 B4 B4', 'Puccini', 'Classic', 'The Most Relaxiing Feel'\n */\nexport type AppState = Map<string, any>;\n\nconst instruments = List([PianoInstrument, FluteInstrument, ViolinInstrument]);\nconst visualizers = List([WaveformVisualizer, RGBCirclesVisualizer, DubVisualizer]);\n//var songs = List([{'id': '2', 'songTitle': 'New Age Track', 'notes': 'B4 B4 D4 B4 B4 D4 G4 A4 B4 B4 D4 C4 C4 C4 B4 B4', 'artist': 'The Reacts', 'genre': 'DubStep', 'album': 'FrontEnd Rocks'}, {'id': '1', 'songTitle': 'Ode to Joy (Dubstep Remix)', 'notes': 'E4 E4 F4 G4 G4 F4 E4 D4 C4 C4 D4 E4 E4 D4 D4'}, {'id': '3', 'songTitle': 'Allegro', 'notes': 'C3 D6 D4 B4 D6 C3 G4 A4 C3 D6 D4 C4 D6 C4 B4 B4', 'artist': 'Mozart', 'genre': 'Classic', 'album': 'Eine kleine Nachtmusik'}, {'id': '4', 'songTitle': 'Fur Elise', 'notes': 'C7 D7 A4 B4 C7 D7 A4 B4 C7 D7 A4 B4 C7 D7 A4 B4', 'artist': 'Beeethoven', 'genre': 'Classic', 'album': 'Fur Elise'}, {'id': '5', 'songTitle': 'O mio babbino caro', 'notes': 'B4 C5 D4 B4 C5 D4 G4 A4 B4 B4 C5 D4 C4 C4 B4 B4', 'artist': 'Puccini', 'genre': 'Classic', 'album': 'The Most Relaxiing Feel'}])\nexport const defaultState: AppState = Map<string, any>({\n    instruments,\n    visualizers,\n    //songs\n});\n","import { io as newSocket, Socket as SocketIO } from 'socket.io-client';\n\nconst SOCKET_URL = 'ws://localhost:3001';\n\nconst SOCKET_OPTS = {\n  transports: ['websocket'],\n  path: '/ws',\n  autoConnect: true,\n  reconnection: true,\n  timeout: 10000,\n};\n\nlet idCounter = 1;\n\nexport async function send(\n  socket: Socket,\n  name: string,\n  msg: any,\n): Promise<any> {\n  const _id = idCounter++;\n\n  return new Promise((resolve, reject) => {\n    socket.once(`${name}.${_id}`, resp => {\n      const { error, ...success } = resp;\n      if (success) {\n        resolve(success);\n      } else {\n        reject(error);\n      }\n    });\n    socket.emit(name, { _id, ...msg });\n  });\n}\n\n\nexport type Socket = SocketIO;\n\nexport function initializeSocket(\n  onConnect: (socket: Socket) => void,\n  onDisconnect: () => void,\n): Socket {\n  const socket = newSocket(SOCKET_URL, SOCKET_OPTS);\n\n  socket.on('connect', () => onConnect(socket));\n  socket.on('disconnect', onDisconnect);\n\n  return socket;\n}\n","// 3rd party library imports\nimport { useReducer, useEffect } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\n// project imports\nimport { MainPage } from './MainPage';\nimport { DispatchAction, appReducer } from './Reducer';\nimport { defaultState } from './State';\nimport { initializeSocket, send } from './Socket';\n\n// css imports\nimport 'animate.css';\n\n/** ------------------------------------------------------------------------ **\n * App component\n ** ------------------------------------------------------------------------ */\n\nfunction App() {\n  const [state, dispatch] = useReducer(appReducer, defaultState);\n\n  useEffect(() => {\n    initializeSocket(\n      async socket => {\n        dispatch(new DispatchAction('SET_SOCKET', { socket }));\n        const { songs } = await send(socket, 'get_songs', {});\n        dispatch(new DispatchAction('SET_SONGS', { songs }));\n      },\n      () => {\n        dispatch(new DispatchAction('DELETE_SOCKET'));\n      },\n    );\n  }, []);\n\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\">\n          <MainPage state={state} dispatch={dispatch} />\n        </Route>\n        <Route path=\"/:instrument\">\n          <MainPage state={state} dispatch={dispatch} />\n        </Route>\n        <Route path=\"*\">\n          <div>404</div>\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// 3rd party library imports\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// project imports\nimport App from './App';\n\n// CSS\nimport './index.css';\nimport './tachyons.css';\n\n\n/** ------------------------------------------------------------------------ **\n * Entry point.\n ** ------------------------------------------------------------------------ */\n\nfunction onReactLoaded() {\n  console.log('React has loaded.');\n}\n\nconst rootEl = document.getElementById('root');\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootEl,  // Insert into DOM here\n  onReactLoaded,\n);\n"]}}