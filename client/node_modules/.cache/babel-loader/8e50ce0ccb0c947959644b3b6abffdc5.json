{"ast":null,"code":"// 3rd party library imports\nimport*as Tone from'tone';import classNames from'classnames';import{List,Range}from'immutable';import React from'react';// project imports\nimport{Instrument}from'../Instruments';/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function PianoKey(_ref){var note=_ref.note,synth=_ref.synth,minor=_ref.minor,index=_ref.index;/**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */return/*#__PURE__*/ (// Observations:\n// 1. The JSX refers to the HTML-looking syntax within TypeScript.\n// 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n// 3. The curly braces `{` and `}` should remind you of string interpolation.\n_jsx(\"div\",{onMouseDown:function onMouseDown(){return synth===null||synth===void 0?void 0:synth.triggerAttack(\"\".concat(note));}// Question: what is `onMouseDown`?\n,onMouseUp:function onMouseUp(){return synth===null||synth===void 0?void 0:synth.triggerRelease('+0.25');}// Question: what is `onMouseUp`?\n,className:classNames('ba pointer absolute dim',{'bg-black black h3':minor,// minor keys are black\n'black bg-white h4':!minor// major keys are white\n}),style:{// CSS\ntop:0,left:\"\".concat(index*2,\"rem\"),zIndex:minor?1:0,width:minor?'1.5rem':'2rem',marginLeft:minor?'0.25rem':0}}));}// eslint-disable-next-line\nfunction PianoKeyWithoutJSX(_ref2){var note=_ref2.note,synth=_ref2.synth,minor=_ref2.minor,index=_ref2.index;/**\n   * This React component for pedagogical purposes.\n   * See `PianoKey` for the React component with JSX (JavaScript XML).\n   */return/*#__PURE__*/React.createElement('div',{onMouseDown:function onMouseDown(){return synth===null||synth===void 0?void 0:synth.triggerAttack(\"\".concat(note));},onMouseUp:function onMouseUp(){return synth===null||synth===void 0?void 0:synth.triggerRelease('+0.25');},className:classNames('ba pointer absolute dim',{'bg-black black h3':minor,'black bg-white h4':!minor}),style:{top:0,left:\"\".concat(index*2,\"rem\"),zIndex:minor?1:0,width:minor?'1.5rem':'2rem',marginLeft:minor?'0.25rem':0}},[]);}function PianoType(_ref3){var title=_ref3.title,onClick=_ref3.onClick,active=_ref3.active;return/*#__PURE__*/_jsx(\"div\",{onClick:onClick,className:classNames('dim pointer ph2 pv1 ba mr2 br1 fw7 bw1',{'b--black black':active,'gray b--light-gray':!active}),children:title});}function Piano(_ref4){var synth=_ref4.synth,setSynth=_ref4.setSynth;var keys=List([{note:'C',idx:0},{note:'Db',idx:0.5},{note:'D',idx:1},{note:'Eb',idx:1.5},{note:'E',idx:2},{note:'F',idx:3},{note:'Gb',idx:3.5},{note:'G',idx:4},{note:'Ab',idx:4.5},{note:'A',idx:5},{note:'Bb',idx:5.5},{note:'B',idx:6}]);var setOscillator=function setOscillator(newType){setSynth(function(oldSynth){oldSynth.disconnect();return new Tone.Synth({oscillator:{type:newType}}).toDestination();});};var oscillators=List(['sine','sawtooth','square','triangle','fmsine','fmsawtooth','fmtriangle','amsine','amsawtooth','amtriangle']);return/*#__PURE__*/_jsxs(\"div\",{className:\"pv4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Range(2,7).map(function(octave){return keys.map(function(key){var isMinor=key.note.indexOf('b')!==-1;var note=\"\".concat(key.note).concat(octave);return/*#__PURE__*/_jsx(PianoKey,{//react key\nnote:note,synth:synth,minor:isMinor,octave:octave,index:(octave-2)*7+key.idx},note);});})}),/*#__PURE__*/_jsx(\"div\",{className:'pl4 pt4 flex',children:oscillators.map(function(o){return/*#__PURE__*/_jsx(PianoType,{title:o,onClick:function onClick(){return setOscillator(o);},active:(synth===null||synth===void 0?void 0:synth.oscillator.type)===o},o);})})]});}export var PianoInstrument=new Instrument('Piano',Piano);","map":{"version":3,"sources":["/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/instruments/Piano.tsx"],"names":["Tone","classNames","List","Range","React","Instrument","PianoKey","note","synth","minor","index","triggerAttack","triggerRelease","top","left","zIndex","width","marginLeft","PianoKeyWithoutJSX","createElement","onMouseDown","onMouseUp","className","style","PianoType","title","onClick","active","Piano","setSynth","keys","idx","setOscillator","newType","oldSynth","disconnect","Synth","oscillator","type","toDestination","oscillators","map","octave","key","isMinor","indexOf","o","PianoInstrument"],"mappings":"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","sourcesContent":["// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport { List, Range } from 'immutable';\nimport React from 'react';\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */\n\ninterface PianoKeyProps {\n  note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\n  duration?: string;\n  synth?: Tone.Synth; // Contains library code for making sound\n  minor?: boolean; // True if minor key, false if major key\n  octave: number;\n  index: number; // octave + index together give a location for the piano key\n}\n\nexport function PianoKey({\n  note,\n  synth,\n  minor,\n  index,\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */\n  return (\n    // Observations:\n    // 1. The JSX refers to the HTML-looking syntax within TypeScript.\n    // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n    // 3. The curly braces `{` and `}` should remind you of string interpolation.\n    <div\n      onMouseDown={() => synth?.triggerAttack(`${note}`)} // Question: what is `onMouseDown`?\n      onMouseUp={() => synth?.triggerRelease('+0.25')} // Question: what is `onMouseUp`?\n      className={classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor, // minor keys are black\n        'black bg-white h4': !minor, // major keys are white\n      })}\n      style={{\n        // CSS\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      }}\n    ></div>\n  );\n}\n\n// eslint-disable-next-line\nfunction PianoKeyWithoutJSX({\n  note,\n  synth,\n  minor,\n  index,\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component for pedagogical purposes.\n   * See `PianoKey` for the React component with JSX (JavaScript XML).\n   */\n  return React.createElement(\n    'div',\n    {\n      onMouseDown: () => synth?.triggerAttack(`${note}`),\n      onMouseUp: () => synth?.triggerRelease('+0.25'),\n      className: classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor,\n        'black bg-white h4': !minor,\n      }),\n      style: {\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      },\n    },\n    [],\n  );\n}\n\nfunction PianoType({ title, onClick, active }: any): JSX.Element {\n  return (\n    <div\n      onClick={onClick}\n      className={classNames('dim pointer ph2 pv1 ba mr2 br1 fw7 bw1', {\n        'b--black black': active,\n        'gray b--light-gray': !active,\n      })}\n    >\n      {title}\n    </div>\n  );\n}\n\nfunction Piano({ synth, setSynth }: InstrumentProps): JSX.Element {\n  const keys = List([\n    { note: 'C', idx: 0 },\n    { note: 'Db', idx: 0.5 },\n    { note: 'D', idx: 1 },\n    { note: 'Eb', idx: 1.5 },\n    { note: 'E', idx: 2 },\n    { note: 'F', idx: 3 },\n    { note: 'Gb', idx: 3.5 },\n    { note: 'G', idx: 4 },\n    { note: 'Ab', idx: 4.5 },\n    { note: 'A', idx: 5 },\n    { note: 'Bb', idx: 5.5 },\n    { note: 'B', idx: 6 },\n  ]);\n\n  const setOscillator = (newType: Tone.ToneOscillatorType) => {\n    setSynth(oldSynth => {\n      oldSynth.disconnect();\n\n      return new Tone.Synth({\n        oscillator: { type: newType } as Tone.OmniOscillatorOptions,\n      }).toDestination();\n    });\n  };\n\n  const oscillators: List<OscillatorType> = List([\n    'sine',\n    'sawtooth',\n    'square',\n    'triangle',\n    'fmsine',\n    'fmsawtooth',\n    'fmtriangle',\n    'amsine',\n    'amsawtooth',\n    'amtriangle',\n  ]) as List<OscillatorType>;\n\n  return (\n    <div className=\"pv4\">\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(2, 7).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave}`;\n            return (\n              <PianoKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave}\n                index={(octave - 2) * 7 + key.idx}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className={'pl4 pt4 flex'}>\n        {oscillators.map(o => (\n          <PianoType\n            key={o}\n            title={o}\n            onClick={() => setOscillator(o)}\n            active={synth?.oscillator.type === o}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport const PianoInstrument = new Instrument('Piano', Piano);\n"]},"metadata":{},"sourceType":"module"}