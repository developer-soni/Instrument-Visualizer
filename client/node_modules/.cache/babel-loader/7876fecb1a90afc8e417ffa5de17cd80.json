{"ast":null,"code":"import _classCallCheck from\"/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";// 3rd party library imports\nimport*as Tone from'tone';import Sketch from'react-p5';import React,{useEffect,useMemo,useCallback}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Visualizer=function Visualizer(name,draw){_classCallCheck(this,Visualizer);this.name=void 0;this.draw=void 0;this.name=name;this.draw=draw;};export function VisualizerContainer(_ref){var visualizer=_ref.visualizer;var name=visualizer.name,_draw=visualizer.draw;var analyzer=useMemo(function(){return new Tone.Analyser('waveform',256);},[]);var onResize=useCallback(function(p5){var width=window.innerWidth;var height=window.innerHeight/2;p5.resizeCanvas(width,height,false);},[]);useEffect(function(){Tone.getDestination().volume.value=-5;Tone.getDestination().connect(analyzer);return function(){Tone.getDestination().disconnect(analyzer);};},[analyzer]);var setup=function setup(p5,canvasParentRef){var width=window.innerWidth;var height=window.innerHeight/2;p5.createCanvas(width,height,p5.WEBGL).parent(canvasParentRef);};return/*#__PURE__*/_jsxs(\"div\",{className:'bg-black absolute bottom-0 right-0 left-0 h-50',children:[/*#__PURE__*/_jsx(\"div\",{className:'z-1 absolute left-0 top-0 pa4 white f5',children:name}),/*#__PURE__*/_jsx(Sketch,{setup:setup,draw:function draw(p5){return _draw(p5,analyzer);},windowResized:onResize})]});}","map":{"version":3,"sources":["/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/Visualizers.tsx"],"names":["Tone","Sketch","React","useEffect","useMemo","useCallback","Visualizer","name","draw","VisualizerContainer","visualizer","analyzer","Analyser","onResize","p5","width","window","innerWidth","height","innerHeight","resizeCanvas","getDestination","volume","value","connect","disconnect","setup","canvasParentRef","createCanvas","WEBGL","parent"],"mappings":"gJAAA;AACA,MAAO,GAAKA,CAAAA,IAAZ,KAAsB,MAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CAEA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,OAA3B,CAAoCC,WAApC,KAAuD,OAAvD,C,wFAQA,UAAaC,CAAAA,UAAb,CAIE,oBAAYC,IAAZ,CAA0BC,IAA1B,CAAkD,uCAHlCD,IAGkC,aAFlCC,IAEkC,QAChD,KAAKD,IAAL,CAAYA,IAAZ,CACA,KAAKC,IAAL,CAAYA,IAAZ,CACD,CAPH,CAUA,MAAO,SAASC,CAAAA,mBAAT,MAAuE,IAAxCC,CAAAA,UAAwC,MAAxCA,UAAwC,CAC5E,GAAQH,CAAAA,IAAR,CAAuBG,UAAvB,CAAQH,IAAR,CAAcC,KAAd,CAAuBE,UAAvB,CAAcF,IAAd,CAEA,GAAMG,CAAAA,QAAuB,CAAGP,OAAO,CACrC,iBAAM,IAAIJ,CAAAA,IAAI,CAACY,QAAT,CAAkB,UAAlB,CAA8B,GAA9B,CAAN,EADqC,CAErC,EAFqC,CAAvC,CAKA,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,CAAC,SAACS,EAAD,CAAY,CACvC,GAAMC,CAAAA,KAAK,CAAGC,MAAM,CAACC,UAArB,CACA,GAAMC,CAAAA,MAAM,CAAGF,MAAM,CAACG,WAAP,CAAqB,CAApC,CAEAL,EAAE,CAACM,YAAH,CAAgBL,KAAhB,CAAuBG,MAAvB,CAA+B,KAA/B,EACD,CAL2B,CAKzB,EALyB,CAA5B,CAOAf,SAAS,CAAC,UAAM,CACdH,IAAI,CAACqB,cAAL,GAAsBC,MAAtB,CAA6BC,KAA7B,CAAqC,CAAC,CAAtC,CACAvB,IAAI,CAACqB,cAAL,GAAsBG,OAAtB,CAA8Bb,QAA9B,EACA,MAAO,WAAM,CACXX,IAAI,CAACqB,cAAL,GAAsBI,UAAtB,CAAiCd,QAAjC,EACD,CAFD,CAGD,CANQ,CAMN,CAACA,QAAD,CANM,CAAT,CAQA,GAAMe,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACZ,EAAD,CAASa,eAAT,CAAsC,CAClD,GAAMZ,CAAAA,KAAK,CAAGC,MAAM,CAACC,UAArB,CACA,GAAMC,CAAAA,MAAM,CAAGF,MAAM,CAACG,WAAP,CAAqB,CAApC,CACAL,EAAE,CAACc,YAAH,CAAgBb,KAAhB,CAAuBG,MAAvB,CAA+BJ,EAAE,CAACe,KAAlC,EAAyCC,MAAzC,CAAgDH,eAAhD,EACD,CAJD,CAMA,mBACE,aAAK,SAAS,CAAE,gDAAhB,wBACE,YAAK,SAAS,CAAE,wCAAhB,UAA2DpB,IAA3D,EADF,cAEE,KAAC,MAAD,EACE,KAAK,CAAEmB,KADT,CAEE,IAAI,CAAE,cAAAZ,EAAE,QAAIN,CAAAA,KAAI,CAACM,EAAD,CAAKH,QAAL,CAAR,EAFV,CAGE,aAAa,CAAEE,QAHjB,EAFF,GADF,CAUD","sourcesContent":["// 3rd party library imports\nimport * as Tone from 'tone';\nimport Sketch from 'react-p5';\nimport P5 from 'p5';\nimport React, { useEffect, useMemo, useCallback } from 'react';\n\ntype VisualizerDrawer = (p5: P5, analyzer: Tone.Analyser) => void;\n\ninterface VisualizerContainerProps {\n  visualizer: Visualizer;\n}\n\nexport class Visualizer {\n  public readonly name: string;\n  public readonly draw: VisualizerDrawer;\n\n  constructor(name: string, draw: VisualizerDrawer) {\n    this.name = name;\n    this.draw = draw;\n  }\n}\n\nexport function VisualizerContainer({ visualizer }: VisualizerContainerProps) {\n  const { name, draw } = visualizer;\n\n  const analyzer: Tone.Analyser = useMemo(\n    () => new Tone.Analyser('waveform', 256),\n    [],\n  );\n\n  const onResize = useCallback((p5: P5) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n\n    p5.resizeCanvas(width, height, false);\n  }, []);\n\n  useEffect(() => {\n    Tone.getDestination().volume.value = -5;\n    Tone.getDestination().connect(analyzer);\n    return () => {\n      Tone.getDestination().disconnect(analyzer);\n    };\n  }, [analyzer]);\n\n  const setup = (p5: P5, canvasParentRef: Element) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    p5.createCanvas(width, height, p5.WEBGL).parent(canvasParentRef);\n  };\n\n  return (\n    <div className={'bg-black absolute bottom-0 right-0 left-0 h-50'}>\n      <div className={'z-1 absolute left-0 top-0 pa4 white f5'}>{name}</div>\n      <Sketch\n        setup={setup}\n        draw={p5 => draw(p5, analyzer)}\n        windowResized={onResize}\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}