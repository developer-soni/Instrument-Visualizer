{"ast":null,"code":"// 3rd party library imports\nimport*as Tone from'tone';import classNames from'classnames';import{List,Range}from'immutable';import React,{useEffect}from'react';// project imports\nimport{Instrument}from'../Instruments';import image from'./../img/flute.png';/** ------------------------------------------------------------------------ **\r\n * Contains implementation of components for Flute.\r\n ** ------------------------------------------------------------------------ */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function FluteKey(_ref){var note=_ref.note,synth=_ref.synth,minor=_ref.minor,index=_ref.index;/**\r\n     * This React component corresponds to either a major or minor key in the Flute.\r\n     */return/*#__PURE__*/ (// Observations:\n// 1. The JSX refers to the HTML-looking syntax within TypeScript.\n// 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n// 3. The curly braces `{` and `}` should remind you of string interpolation.\n_jsx(\"div\",{onMouseDown:function onMouseDown(){return synth===null||synth===void 0?void 0:synth.triggerAttack(\"\".concat(note));}// Question: what is `onMouseDown`?\n,onMouseUp:function onMouseUp(){return synth===null||synth===void 0?void 0:synth.triggerRelease('+0.25');}// Question: what is `onMouseUp`?\n,className:classNames('ba pointer absolute dim',{'bg-black black h3':minor,// minor keys are black\n'black bg-white h4':!minor// major keys are white\n}),style:{// CSS\ntop:0,left:\"\".concat(index*2,\"rem\"),zIndex:minor?1:0,width:minor?'1.5rem':'2rem',marginLeft:minor?'0.25rem':0}}));}function Flute(_ref2){var synth=_ref2.synth,setSynth=_ref2.setSynth;var keys=List([{note:'C',idx:0},{note:'Db',idx:0.5},{note:'D',idx:1},{note:'Eb',idx:1.5},{note:'E',idx:2},{note:'F',idx:3},{note:'Gb',idx:3.5},{note:'G',idx:4},{note:'Ab',idx:4.5},{note:'A',idx:5},{note:'Bb',idx:5.5},{note:'B',idx:6}]);// Tone created with : https://tonejs.github.io/examples/simpleSynth\nvar setOscillator=function setOscillator(){setSynth(function(oldSynth){oldSynth.disconnect();return new Tone.Synth({\"volume\":7,\"detune\":0,\"portamento\":0,\"envelope\":{\"attack\":1,\"attackCurve\":\"cosine\",\"decay\":2,\"decayCurve\":\"linear\",\"release\":1,\"releaseCurve\":\"exponential\",\"sustain\":0},\"oscillator\":{\"partialCount\":3,\"partials\":[0.000048225308641975394,0.007236810378086416,1],\"phase\":3,\"type\":\"fatcustom\",\"count\":5,\"spread\":1}}).toDestination();});};useEffect(setOscillator,[setSynth]);return/*#__PURE__*/_jsxs(\"div\",{className:\"pv4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image\",children:/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"Flute\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative dib h4 w-100 ml4\",children:Range(2,7).map(function(octave){return keys.map(function(key){var isMinor=key.note.indexOf('b')!==-1;var note=\"\".concat(key.note).concat(octave);return/*#__PURE__*/_jsx(FluteKey,{//react key\nnote:note,synth:synth,minor:isMinor,octave:octave,index:(octave-2)*7+key.idx},note);});})})]});}export var FluteInstrument=new Instrument('Flute (developer-soni)',Flute);","map":{"version":3,"sources":["/Users/devsoni/Desktop/Instrument-Visualizer-Project/client/src/instruments/developer-soni.tsx"],"names":["Tone","classNames","List","Range","React","useEffect","Instrument","image","FluteKey","note","synth","minor","index","triggerAttack","triggerRelease","top","left","zIndex","width","marginLeft","Flute","setSynth","keys","idx","setOscillator","oldSynth","disconnect","Synth","toDestination","map","octave","key","isMinor","indexOf","FluteInstrument"],"mappings":"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","sourcesContent":["// 3rd party library imports\r\nimport * as Tone from 'tone';\r\nimport classNames from 'classnames';\r\nimport { List, Range } from 'immutable';\r\nimport React, { useEffect } from 'react';\r\n\r\n// project imports\r\nimport { Instrument, InstrumentProps } from '../Instruments';\r\nimport { OmniOscillatorOptions } from \"tone/Tone/source/oscillator/OscillatorInterface\";\r\nimport { RecursivePartial } from \"tone/Tone/core/util/Interface\";\r\nimport image from './../img/flute.png';\r\n\r\n/** ------------------------------------------------------------------------ **\r\n * Contains implementation of components for Flute.\r\n ** ------------------------------------------------------------------------ */\r\n\r\ninterface FluteKeyProps {\r\n    note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\r\n    duration?: string;\r\n    synth?: Tone.Synth; // Contains library code for making sound\r\n    minor?: boolean; // True if minor key, false if major key\r\n    octave: number;\r\n    index: number; // octave + index together give a location for the Flute key\r\n}\r\n\r\nexport function FluteKey({\r\n    note,\r\n    synth,\r\n    minor,\r\n    index,\r\n}: FluteKeyProps): JSX.Element {\r\n    /**\r\n     * This React component corresponds to either a major or minor key in the Flute.\r\n     */\r\n    return (\r\n        // Observations:\r\n        // 1. The JSX refers to the HTML-looking syntax within TypeScript.\r\n        // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\r\n        // 3. The curly braces `{` and `}` should remind you of string interpolation.\r\n        <div\r\n            onMouseDown={() => synth?.triggerAttack(`${note}`)} // Question: what is `onMouseDown`?\r\n            onMouseUp={() => synth?.triggerRelease('+0.25')} // Question: what is `onMouseUp`?\r\n            className={classNames('ba pointer absolute dim', {\r\n                'bg-black black h3': minor, // minor keys are black\r\n                'black bg-white h4': !minor, // major keys are white\r\n            })}\r\n            style={{\r\n                // CSS\r\n                top: 0,\r\n                left: `${index * 2}rem`,\r\n                zIndex: minor ? 1 : 0,\r\n                width: minor ? '1.5rem' : '2rem',\r\n                marginLeft: minor ? '0.25rem' : 0,\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nfunction Flute({ synth, setSynth }: InstrumentProps): JSX.Element {\r\n    const keys = List([\r\n        { note: 'C', idx: 0 },\r\n        { note: 'Db', idx: 0.5 },\r\n        { note: 'D', idx: 1 },\r\n        { note: 'Eb', idx: 1.5 },\r\n        { note: 'E', idx: 2 },\r\n        { note: 'F', idx: 3 },\r\n        { note: 'Gb', idx: 3.5 },\r\n        { note: 'G', idx: 4 },\r\n        { note: 'Ab', idx: 4.5 },\r\n        { note: 'A', idx: 5 },\r\n        { note: 'Bb', idx: 5.5 },\r\n        { note: 'B', idx: 6 },\r\n    ]);\r\n\r\n    // Tone created with : https://tonejs.github.io/examples/simpleSynth\r\n    const setOscillator = () => {\r\n        setSynth(oldSynth => {\r\n            oldSynth.disconnect();\r\n            return new Tone.Synth({\r\n                \"volume\": 7,\r\n                \"detune\": 0,\r\n                \"portamento\": 0,\r\n                \"envelope\": {\r\n                    \"attack\": 1,\r\n                    \"attackCurve\": \"cosine\",\r\n                    \"decay\": 2,\r\n                    \"decayCurve\": \"linear\",\r\n                    \"release\": 1,\r\n                    \"releaseCurve\": \"exponential\",\r\n                    \"sustain\": 0\r\n                },\r\n                \"oscillator\": {\r\n                    \"partialCount\": 3,\r\n                    \"partials\": [\r\n                        0.000048225308641975394,\r\n                        0.007236810378086416,\r\n                        1\r\n                    ],\r\n                    \"phase\": 3,\r\n                    \"type\": \"fatcustom\",\r\n                    \"count\": 5,\r\n                    \"spread\": 1\r\n                } as RecursivePartial<OmniOscillatorOptions>,\r\n            }).toDestination();\r\n        }\r\n        )\r\n            ;\r\n    };\r\n\r\n    useEffect(setOscillator, [setSynth]);\r\n\r\n    return (\r\n        <div className=\"pv4\">\r\n            <div className={\"image\"}>\r\n                <img src={image} alt={\"Flute\"} />\r\n            </div>\r\n            <div className=\"relative dib h4 w-100 ml4\">\r\n                {Range(2, 7).map(octave =>\r\n                    keys.map(key => {\r\n                        const isMinor = key.note.indexOf('b') !== -1;\r\n                        const note = `${key.note}${octave}`;\r\n                        return (\r\n                            <FluteKey\r\n                                key={note} //react key\r\n                                note={note}\r\n                                synth={synth}\r\n                                minor={isMinor}\r\n                                octave={octave}\r\n                                index={(octave - 2) * 7 + key.idx}\r\n                            />\r\n                        );\r\n                    }),\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport const FluteInstrument = new Instrument('Flute (developer-soni)', Flute);\r\n"]},"metadata":{},"sourceType":"module"}