{"ast":null,"code":"export var detachArrayBuffer = function detachArrayBuffer(arrayBuffer) {\n  var _MessageChannel = new MessageChannel(),\n      port1 = _MessageChannel.port1,\n      port2 = _MessageChannel.port2;\n\n  return new Promise(function (resolve) {\n    var closeAndResolve = function closeAndResolve() {\n      port2.onmessage = null;\n      port1.close();\n      port2.close();\n      resolve();\n    };\n\n    port2.onmessage = function () {\n      return closeAndResolve();\n    };\n\n    try {\n      port1.postMessage(arrayBuffer, [arrayBuffer]);\n    } finally {\n      closeAndResolve();\n    }\n  });\n};","map":{"version":3,"sources":["../../../src/helpers/detach-array-buffer.ts"],"names":[],"mappings":"AAAA,OAAO,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAAC,WAAD,EAA4C;AACzE,wBAAyB,IAAI,cAAJ,EAAzB;AAAA,MAAQ,KAAR,mBAAQ,KAAR;AAAA,MAAe,KAAf,mBAAe,KAAf;;AAEA,SAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAY;AAC3B,QAAM,eAAe,GAAG,SAAlB,eAAkB,GAAK;AACzB,MAAA,KAAK,CAAC,SAAN,GAAkB,IAAlB;AAEA,MAAA,KAAK,CAAC,KAAN;AACA,MAAA,KAAK,CAAC,KAAN;AAEA,MAAA,OAAO;AACV,KAPD;;AASA,IAAA,KAAK,CAAC,SAAN,GAAkB;AAAA,aAAM,eAAe,EAArB;AAAA,KAAlB;;AAEA,QAAI;AACA,MAAA,KAAK,CAAC,WAAN,CAAkB,WAAlB,EAA+B,CAAC,WAAD,CAA/B;AACH,KAFD,SAEU;AACN,MAAA,eAAe;AAClB;AACJ,GAjBM,CAAP;AAkBH,CArBM","sourceRoot":"","sourcesContent":["export const detachArrayBuffer = (arrayBuffer) => {\n    const { port1, port2 } = new MessageChannel();\n    return new Promise((resolve) => {\n        const closeAndResolve = () => {\n            port2.onmessage = null;\n            port1.close();\n            port2.close();\n            resolve();\n        };\n        port2.onmessage = () => closeAndResolve();\n        try {\n            port1.postMessage(arrayBuffer, [arrayBuffer]);\n        }\n        finally {\n            closeAndResolve();\n        }\n    });\n};\n//# sourceMappingURL=detach-array-buffer.js.map"]},"metadata":{},"sourceType":"module"}